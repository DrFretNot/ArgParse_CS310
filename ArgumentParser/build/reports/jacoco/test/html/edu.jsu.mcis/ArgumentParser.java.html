<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ArgumentParser.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ArgumentParser</a> &gt; <a href="index.source.html" class="el_package">edu.jsu.mcis</a> &gt; <span class="el_source">ArgumentParser.java</span></div><h1>ArgumentParser.java</h1><pre class="source lang-java linenums">/**
 @author Katie Wood
 @author Trent Ford 
 @author Andrew Green
 @author Sinh Nguyen
 @author Robert Warren
 @version 1.04 Build firebolt 9001 Nov 9, 2015.
 Argument Parser is a user-friendly library for taking in command line arguments
 and returning their user specified values. The user defines what arguments are 
 required. Then the program will parse command line info, and will automatically 
 genreate help, useage, and error messages when the program is given program 
 invalid arguments.
  
 */

package edu.jsu.mcis;

import java.util.*;
import java.lang.Object.*;
import java.io.*;
//import javax.xml.parsers.*;
//import org.w3c.dom.NodeList;
//import org.w3c.dom.Element;
//import org.w3c.dom.Document;
//import org.xml.sax.SAXException; 
//import java.io.File;
//import java.io.IOException;


/** Description of ArgumentParser:
/**
 *&lt;h2&gt; 
 *INTRO TO ArgParse! 
 *&lt;/h2&gt;
 *
 *&lt;p&gt;The ArgParse_CS310 module make it easy to write user-friendly 
 *command-line interfaces. The program defines what arguments is 
 *requires, and argparse will figure out how to parse those arguments. 
 *The argparse module also automatically generates help and 
 *usage messages and issues error codes when users 
 *give program invalid arguments.&lt;/p&gt;
 *
 *@param  url  an absolute URL giving the base location of the image
 *@param  name the location of the image, relative to the url argument
 *@return      the image at the specified URL
 */
public class ArgumentParser {
	
	private List&lt;NamedArgument&gt; namedArgumentList; //hashmap, key would be the name of the argument
	//if short form is given from CLI, need to search for the name then find it in the map
    private List&lt;PositionalArgument&gt; positionalArgumentList;
<span class="fc" id="L52">    private String programName = &quot;&quot;;</span>
<span class="fc" id="L53">    private String programDescription = &quot;&quot;;</span>
    private int posCount;
    
    
/**
 *the Argument Parser constructor this will instantiate a new instance of the Parser
 *&lt;p&gt;The constructor enters the blanks for the program name and the program description. 
 *Creates a new lists for positional and named arguments. These will be used to hold the 
 *arguments that are created by the user. &lt;/p&gt;
 */    
<span class="fc" id="L63">    public ArgumentParser(){</span>
<span class="fc" id="L64">		this.programName = &quot;&quot;;</span>
<span class="fc" id="L65">        this.programDescription = &quot;&quot;;</span>
<span class="fc" id="L66">        this.positionalArgumentList = new ArrayList&lt;PositionalArgument&gt;();</span>
<span class="fc" id="L67">        this.namedArgumentList = new ArrayList&lt;NamedArgument&gt;(); </span>
<span class="fc" id="L68">		posCount = -1;</span>
<span class="fc" id="L69">	}</span>
	
    /**
     *
     *addProgramName takes in a string program name and adds to a global string program name.
     *@param     addProgramName Takes in a string program name.
     *
     */ 
	public void addProgramName(String inputProgramName){
<span class="fc" id="L78">        programName = inputProgramName;       </span>
<span class="fc" id="L79">    }</span>
    
    /**
     *
     *
     *addProgramDescription takes in a string description of a program and adds to a global string program description.
     *@param addProgramDescription   Takes in a string program description.

    */
    public void addProgramDescription(String inputProgramDescription){
<span class="fc" id="L89">        programDescription = inputProgramDescription;       </span>
<span class="fc" id="L90">    }</span>
    
    /** 
     *Constructor description of getProgramName() 
     *@param getProgramName Receives the specified name of the program
     */
    public String getProgramName(){
<span class="fc" id="L97">        return programName;   </span>
    }
    /** Constructor description of getProgramDescription()
     *@param getProgramDescription recieves a Specified Program Description from CLI
     *@return Returns the specificed description of the program*/ 
    public String getProgramDescription(){
<span class="fc" id="L103">        return programDescription;   </span>
    }
    
    /** @param addPositionalArgument Assume VolumeCalculator.java allows for three positional arguments, named length,          *width, and height, respectively. see code snippit below.
     *&lt;pre&gt;
     *&lt;span style=&quot;color:#80BFFF&quot;&gt;
     *{@code
     *  java VolumeCalculator 7 5 2
     *}
     *&lt;/pre&gt;
     *If a positional argument is not supplied, the program should exit, and the usage information       should be              *displayed along with the error stating the missing argument.
     *&lt;pre&gt;
     *&lt;span style=&quot;color:#80BFFF&quot;&gt;
     *{@code
     *  java VolumeCalculator 7 5
     *}
     *&lt;/pre&gt;
     *
     *should produce something like the following:
     *&lt;pre&gt;
     *&lt;span style=&quot;color:#80BFFF&quot;&gt;
     *{@code
     *  usage: java VolumeCalculator length width height VolumeCalculator.java: error: 
     *  the following arguments are required: height
     *
     *}
     *&lt;/pre&gt;
     *
     *If an additional (i.e., one too many) positional argument is specified, then the program should     exit, and the        *usage information should be displayed along with the error stating the additional     argument.
     *
     *&lt;pre&gt;
     *&lt;span style=&quot;color:#80BFFF&quot;&gt;
     *{@code
     *  java VolumeCalculator 7 5 2 43
     *}
     *&lt;/pre&gt;
     *
     *should produce the following:
     * 
     *&lt;pre&gt;
     *&lt;span style=&quot;color:#80BFFF&quot;&gt;
     *{@code
     *usage: java VolumeCalculator length width height
     *VolumeCalculator.java: error: unrecognized arguments: 43
     *}
     *&lt;/pre&gt;
     *
     */
    public void addPositionalArgument(PositionalArgument arg){
<span class="fc" id="L152">    	posCount++;</span>
<span class="fc" id="L153">    	arg.setPosition(posCount);</span>
<span class="fc" id="L154">    	positionalArgumentList.add(arg);</span>
<span class="fc" id="L155">    }</span>
    
    /**
     *@param addNamedArgument Users have the ability to add a specific named argument, i.e: 
     *&lt;pre&gt;
     *&lt;span style=&quot;color:#80BFFF&quot;&gt;
     *{@code
     *  Set&lt;Something&gt; s;
     *  
     *}
     *&lt;/pre&gt;
     *
     */
    public void addNamedArgument(NamedArgument arg){ //needs to be added to a map
<span class="fc" id="L169">    	namedArgumentList.add(arg);</span>
<span class="fc" id="L170">    }</span>
    /** Constructor description of PositionalArgument getPositionalArgument(String argName) 
     *@param PositionalArgument */
    public PositionalArgument getPositionalArgument(String argName){
<span class="fc" id="L174">    	PositionalArgument returnArg = null;</span>
<span class="fc bfc" id="L175" title="All 2 branches covered.">    	for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L176">    		PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="pc bpc" id="L177" title="1 of 2 branches missed.">    		if(currentArg.getName().equals(argName)){</span>
<span class="fc" id="L178">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L181">    	return returnArg;</span>
    }
    
    //position starts at 0
    public PositionalArgument getPositionalArgument(int argPosition){
<span class="fc" id="L186">    	PositionalArgument returnArg = null;</span>
<span class="fc bfc" id="L187" title="All 2 branches covered.">    	for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L188">    		PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc bfc" id="L189" title="All 2 branches covered.">    		if(currentArg.getPosition() == argPosition){</span>
<span class="fc" id="L190">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L193">    	return returnArg;</span>
    }
    
    public NamedArgument getNamedArgument(String argName){
<span class="fc" id="L197">    	NamedArgument returnArg = null;</span>
<span class="fc bfc" id="L198" title="All 2 branches covered.">    	for(int i = 0; i &lt; namedArgumentList.size(); i++){</span>
<span class="fc" id="L199">    		NamedArgument currentArg = namedArgumentList.get(i);</span>
<span class="fc bfc" id="L200" title="All 2 branches covered.">    		if(currentArg.getName().equals(argName)){</span>
<span class="fc" id="L201">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L204">    	return returnArg;</span>
    }
    
    public NamedArgument getNamedArgument(char argShortFormName){
<span class="fc" id="L208">    	NamedArgument returnArg = null;</span>
<span class="fc bfc" id="L209" title="All 2 branches covered.">    	for(int i = 0; i &lt; namedArgumentList.size(); i++){</span>
<span class="fc" id="L210">    		NamedArgument currentArg = namedArgumentList.get(i);</span>
<span class="fc bfc" id="L211" title="All 2 branches covered.">    		if(currentArg.getShortFormName() == argShortFormName){</span>
<span class="fc" id="L212">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L215">    	return returnArg;</span>
    }
 
    int incorrectDataTypeIndex; //used in parseDataType and incorrectDataTypeMessage
    String incorrectArgumentType; //used in parseDataType and incorrectDataTypeMessage
    
    private void parseDataType(ArrayList&lt;String&gt; argList) throws NumberFormatException{
        
        //checking positional args
<span class="fc bfc" id="L224" title="All 2 branches covered.">		for (int index = 0; index &lt; argList.size(); index++){</span>
<span class="fc" id="L225">			incorrectDataTypeIndex = index;</span>
<span class="fc" id="L226">			incorrectArgumentType = &quot;positional&quot;;</span>
<span class="fc" id="L227">			PositionalArgument currentArg = positionalArgumentList.get(index);</span>
<span class="fc bfc" id="L228" title="All 2 branches covered.">			if (currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L229">				int argValue = Integer.parseInt(argList.get(index));</span>
<span class="fc" id="L230">				currentArg.setValue(argValue);</span>
				//currentArg.setValue(argValue);
<span class="fc" id="L232">			}</span>
            
<span class="fc bfc" id="L234" title="All 2 branches covered.">			else if (currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="fc" id="L235">				float argValue = Float.parseFloat(argList.get(index));</span>
<span class="fc" id="L236">				currentArg.setValue(argValue);</span>
<span class="fc" id="L237">			}</span>
            
<span class="fc bfc" id="L239" title="All 2 branches covered.">			else if (currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L240">				String argValue = argList.get(index);</span>
<span class="fc" id="L241">				currentArg.setValue(argValue);</span>
<span class="fc" id="L242">			}</span>
			
			else{
<span class="fc" id="L245">				Boolean argValue = Boolean.parseBoolean(argList.get(index));</span>
<span class="fc" id="L246">				currentArg.setValue(argValue);</span>
			}
		}
		
		//checking named args
<span class="fc bfc" id="L251" title="All 2 branches covered.">		for (int index = 0; index &lt; namedArgumentList.size(); index++){</span>
<span class="fc" id="L252">			incorrectDataTypeIndex = index;</span>
<span class="fc" id="L253">			incorrectArgumentType = &quot;named&quot;;</span>
<span class="fc" id="L254">			NamedArgument currentArg = namedArgumentList.get(index);</span>
<span class="fc bfc" id="L255" title="All 2 branches covered.">			if (currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L256">				int argValue = Integer.parseInt((String)currentArg.getValue());</span>
<span class="fc" id="L257">				currentArg.setValue(argValue);</span>
<span class="fc" id="L258">			}</span>
            
<span class="pc bpc" id="L260" title="1 of 2 branches missed.">			else if (currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="nc" id="L261">				float argValue = Float.parseFloat((String)currentArg.getValue());</span>
<span class="nc" id="L262">				currentArg.setValue(argValue);</span>
<span class="nc" id="L263">			}</span>
            
<span class="fc bfc" id="L265" title="All 2 branches covered.">			else if (currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L266">				String argValue = (String)currentArg.getValue();</span>
<span class="fc" id="L267">				currentArg.setValue(argValue);</span>
<span class="fc" id="L268">			}</span>
			
			else{
<span class="fc" id="L271">				Boolean argValue = Boolean.parseBoolean((String)currentArg.getValue());</span>
<span class="fc" id="L272">				currentArg.setValue(String.valueOf(argValue));</span>
			}
		}
<span class="fc" id="L275">    }</span>
    
    private String incorrectDataTypeMessage(ArrayList&lt;String&gt; argList){
<span class="fc bfc" id="L278" title="All 2 branches covered.">		if (incorrectArgumentType.equals(&quot;positional&quot;)){</span>
<span class="fc" id="L279">			String errorMessage = &quot;usage: java &quot; + programName;</span>
<span class="fc bfc" id="L280" title="All 2 branches covered.">			for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L281">				PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L282">				errorMessage += &quot; &quot; + currentArg.getName();   </span>
			}
			
<span class="fc" id="L285">			PositionalArgument currentArg = positionalArgumentList.get(incorrectDataTypeIndex); </span>
<span class="fc" id="L286">			errorMessage += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + currentArg.getName() + &quot;: invalid &quot;+ currentArg.getType() + &quot; value: &quot; + argList.get(incorrectDataTypeIndex);</span>
<span class="fc" id="L287">			return errorMessage;  </span>
		}
		
		else {
<span class="fc" id="L291">			String errorMessage = &quot;usage: java &quot; + programName;</span>
<span class="fc bfc" id="L292" title="All 2 branches covered.">			for(int i = 0; i &lt; namedArgumentList.size(); i++) {</span>
<span class="fc" id="L293">				NamedArgument currentArg = namedArgumentList.get(i);</span>
<span class="fc" id="L294">				errorMessage += &quot; &quot; + currentArg.getName();   </span>
			}
			
<span class="fc" id="L297">			NamedArgument currentArg = namedArgumentList.get(incorrectDataTypeIndex); </span>
<span class="fc" id="L298">			errorMessage += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + currentArg.getName() + &quot;: invalid &quot;+ currentArg.getType() + &quot; value: &quot; + currentArg.getValue();</span>
<span class="fc" id="L299">			return errorMessage; </span>
		}  	
    }
   
    private String incorrectNumberOfArgsMessage(ArrayList&lt;String&gt; argList){
<span class="fc" id="L304">   		int numOfArgs = positionalArgumentList.size();</span>
<span class="fc bfc" id="L305" title="All 2 branches covered.">   		if(argList.size() &lt; numOfArgs){</span>
<span class="fc" id="L306">            String message = &quot;usage: java &quot; + programName;</span>
<span class="fc bfc" id="L307" title="All 2 branches covered.">            for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L308">            	PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L309">                message += &quot; &quot; + currentArg.getName();   </span>
            }
            
<span class="fc" id="L312">            message += &quot;\n&quot; + programName + &quot;.java: error: the following arguments are required:&quot;;</span>
            //int numOfArgsMissing = numOfArgs - args.length;
            
<span class="fc bfc" id="L315" title="All 2 branches covered.">            for(int j = argList.size(); j &lt; numOfArgs; j++){</span>
<span class="fc" id="L316">            	PositionalArgument currentArg = positionalArgumentList.get(j);</span>
<span class="fc" id="L317">            	message += &quot; &quot; + currentArg.getName();</span>
            }
            
<span class="fc" id="L320">   			return message;</span>
   		}
        
   		else {
<span class="fc" id="L324">   			String message = &quot;usage: java &quot; + programName;</span>
<span class="fc bfc" id="L325" title="All 2 branches covered.">            for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L326">            	PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L327">                message += &quot; &quot; + currentArg.getName();;   </span>
            }
<span class="fc" id="L329">            message += &quot;\n&quot; + programName + &quot;.java: error: unrecognized arguments:&quot;;</span>
            //int numOfArgsUnrecognized = args.length - numOfArgs;
            
<span class="fc bfc" id="L332" title="All 2 branches covered.">            for(int j = numOfArgs; j &lt; argList.size(); j++){</span>
<span class="fc" id="L333">            	message += &quot; &quot; + argList.get(j);</span>
            }
<span class="fc" id="L335">   			return message;</span>
   		}
   }
    
    private String helpMessage(){ //update the help message to print out all options, not just positional
<span class="fc" id="L340">		String helpMessage = &quot;usage: java &quot; + programName;</span>
<span class="fc bfc" id="L341" title="All 2 branches covered.">		for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L342">            PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L343">			helpMessage += &quot; [&quot; + currentArg.getName() + &quot;]&quot;;   </span>
		}
        
<span class="fc bfc" id="L346" title="All 2 branches covered.">        for(int i = 0; i &lt; namedArgumentList.size(); i++) {</span>
<span class="fc" id="L347">            NamedArgument namedArg = namedArgumentList.get(i);</span>
<span class="fc" id="L348">            helpMessage += &quot; [&quot; + namedArg.getName() + &quot;] &quot;;</span>
        }
  
        
<span class="fc" id="L352">        helpMessage += &quot;\n&quot; + programDescription + &quot;\npositional arguments:&quot;;</span>
		
<span class="fc bfc" id="L354" title="All 2 branches covered.">        for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L355">			PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L356">			helpMessage += &quot;\n[&quot; + currentArg.getName() + &quot;] &quot; + currentArg.getDescription();   </span>
		}

<span class="fc" id="L359">		return helpMessage;</span>
    }
    
   
    
    private ArrayList&lt;String&gt; getPositionalArgs(String[] args){
<span class="fc" id="L365">    	ArrayList&lt;String&gt; posArgList = new ArrayList&lt;String&gt;(); </span>
<span class="fc bfc" id="L366" title="All 2 branches covered.">    	for(int i = 0; i &lt; args.length; i++){ //going through args from CLI</span>
<span class="fc bfc" id="L367" title="All 4 branches covered.">    		if(!args[i].startsWith(&quot;-&quot;) &amp;&amp; i == 0){ //test if the first arg is a positional arg</span>
<span class="fc" id="L368">    			posArgList.add(args[i]);</span>
    		}
<span class="fc bfc" id="L370" title="All 2 branches covered.">    		else if(!args[i].startsWith(&quot;-&quot;)){ //arg from CLI doesn't have a dash</span>
<span class="fc bfc" id="L371" title="All 2 branches covered.">    			if(!args[i-1].startsWith(&quot;-&quot;)){ //if the one before it doesn't have a dash, then it's a pos arg</span>
<span class="fc" id="L372">    				posArgList.add(args[i]);</span>
    			}
    			else{ //the arg before it has a dash
<span class="fc" id="L375">    				String[] tempNamedArg = new String[2];</span>
<span class="fc bfc" id="L376" title="All 2 branches covered.">    				if(args[i-1].startsWith(&quot;--&quot;)){ //arg before it is in long form</span>
<span class="fc" id="L377">    					tempNamedArg = args[i-1].split(&quot;--&quot;);</span>
<span class="fc bfc" id="L378" title="All 2 branches covered.">    					for(int j = 0; j &lt; namedArgumentList.size(); j++){ //go through all named args</span>
<span class="fc" id="L379">    						NamedArgument currentNamedArg = namedArgumentList.get(j);</span>
<span class="fc bfc" id="L380" title="All 2 branches covered.">    						if(currentNamedArg.getName().equals(tempNamedArg[1])) {</span>
<span class="fc bfc" id="L381" title="All 2 branches covered.">								if(currentNamedArg.getType().equals(&quot;boolean&quot;)){ //if long form arg is boolean, still need to add arg after to pos args</span>
<span class="fc" id="L382">									posArgList.add(args[i]);</span>
								}
							}
    					}
    				}
    				else{ //arg before it is in short form
<span class="fc" id="L388">    					tempNamedArg = args[i-1].split(&quot;-&quot;);</span>
<span class="fc bfc" id="L389" title="All 2 branches covered.">						if(tempNamedArg[1].length() == 1){ //single char</span>
<span class="fc bfc" id="L390" title="All 2 branches covered.">							for(int j = 0; j &lt; namedArgumentList.size(); j++){ //go through all named args</span>
<span class="fc" id="L391">								NamedArgument currentNamedArg = namedArgumentList.get(j);</span>
<span class="fc bfc" id="L392" title="All 2 branches covered.">								if(Character.toString(currentNamedArg.getShortFormName()).equals(tempNamedArg[1])) {</span>
<span class="fc bfc" id="L393" title="All 2 branches covered.">									if(currentNamedArg.getType().equals(&quot;boolean&quot;)){ //if short form arg is boolean, still need to add arg after to pos args</span>
<span class="fc" id="L394">										posArgList.add(args[i]);</span>
									}
								}
							}
						}
						else{ //multiple flags in one specification, must be boolean so add arg after it to pos args
<span class="fc" id="L400">							posArgList.add(args[i]);</span>
						}
    				}
    			}
    		}
    	}
<span class="fc" id="L406">    	return posArgList;</span>
    }
    
    private void setLongFormNamedArgValues(String[] args){
<span class="fc bfc" id="L410" title="All 2 branches covered.">    	for(int i = 0; i &lt; args.length; i++){</span>
<span class="fc" id="L411">    		String[] tempNamedArg = new String[2];</span>
<span class="fc bfc" id="L412" title="All 2 branches covered.">    		if(args[i].startsWith(&quot;--&quot;)){</span>
<span class="fc" id="L413">    			tempNamedArg = args[i].split(&quot;--&quot;);</span>
<span class="fc bfc" id="L414" title="All 2 branches covered.">    			for(int j = 0; j &lt; namedArgumentList.size(); j++){</span>
<span class="fc" id="L415">    				NamedArgument currentArg = namedArgumentList.get(j);</span>
<span class="fc bfc" id="L416" title="All 2 branches covered.">    				if(currentArg.getName().equals(tempNamedArg[1])){</span>
<span class="fc bfc" id="L417" title="All 2 branches covered.">    					if(!currentArg.getType().equals(&quot;boolean&quot;)){</span>
<span class="fc" id="L418">    						currentArg.setValue(args[i+1]);</span>
    					}
    					else{
<span class="fc" id="L421">    						currentArg.setValue(&quot;true&quot;);</span>
    					}
    				}
    			}
    		}
    	}
<span class="fc" id="L427">    }</span>
    private void setShortFormNamedArgValues(String[] args){
<span class="fc bfc" id="L429" title="All 2 branches covered.">		for(int i = 0; i &lt; args.length; i++){</span>
<span class="fc" id="L430">			String[] tempNamedArg = new String[2];</span>
<span class="fc bfc" id="L431" title="All 2 branches covered.">			if(args[i].startsWith(&quot;-&quot;)){</span>
<span class="fc" id="L432">				tempNamedArg = args[i].split(&quot;-&quot;);</span>
<span class="fc bfc" id="L433" title="All 2 branches covered.">				for(int k = 0; k &lt; namedArgumentList.size(); k++){</span>
<span class="fc" id="L434">					NamedArgument currentNamedArg = namedArgumentList.get(k);</span>
<span class="fc bfc" id="L435" title="All 2 branches covered.">					if(tempNamedArg[1].length() == 1){ //single char</span>
<span class="fc bfc" id="L436" title="All 2 branches covered.">						if(Character.toString(currentNamedArg.getShortFormName()).equals(tempNamedArg[1])){</span>
<span class="fc bfc" id="L437" title="All 2 branches covered.">							if(!currentNamedArg.getType().equals(&quot;boolean&quot;)){</span>
<span class="fc" id="L438">								currentNamedArg.setValue(args[i+1]);</span>
							}
							else{
<span class="fc" id="L441">								currentNamedArg.setValue(&quot;true&quot;);</span>
							}
						}
					}
					else{ //multiple flags in one specification
<span class="fc bfc" id="L446" title="All 2 branches covered.">						for(int j = 0; j &lt; tempNamedArg[1].length(); j++){</span>
<span class="fc bfc" id="L447" title="All 2 branches covered.">							if(currentNamedArg.getShortFormName() == tempNamedArg[1].charAt(j)){</span>
<span class="fc" id="L448">								currentNamedArg.setValue(&quot;true&quot;);</span>
							}
						}
					}
				}
			}
		}
<span class="fc" id="L455">	}</span>
<span class="fc" id="L456">	String invalidNamedArgument = &quot;&quot;; //used in invalidNamedArgument and argumentDoesNotExistMessage</span>
	
	private void invalidNamedArgument(String[] args) throws ArgumentDoesNotExistException{
<span class="fc bfc" id="L459" title="All 2 branches covered.">		for(int i = 0; i &lt; args.length; i++){</span>
<span class="fc bfc" id="L460" title="All 2 branches covered.">			if(args[i].startsWith(&quot;--&quot;)){</span>
<span class="fc" id="L461">				String[] splitLongNamedArg = new String[2];</span>
<span class="fc" id="L462">				splitLongNamedArg = args[i].split(&quot;--&quot;);</span>
<span class="fc" id="L463">				NamedArgument tempArg = getNamedArgument(splitLongNamedArg[1]);</span>
<span class="fc bfc" id="L464" title="All 2 branches covered.">				if(tempArg == null){</span>
<span class="fc" id="L465">					invalidNamedArgument = splitLongNamedArg[1];</span>
<span class="fc" id="L466">					throw new ArgumentDoesNotExistException(argumentDoesNotExistMessage(invalidNamedArgument));</span>
				}
<span class="fc" id="L468">			}</span>
<span class="fc bfc" id="L469" title="All 2 branches covered.">			else if(args[i].startsWith(&quot;-&quot;)){</span>
<span class="fc" id="L470">				String[] splitShortNamedArg = new String[2];</span>
<span class="fc" id="L471">				splitShortNamedArg = args[i].split(&quot;-&quot;);</span>
<span class="fc bfc" id="L472" title="All 2 branches covered.">				if(splitShortNamedArg[1].length() == 1){ //single char</span>
<span class="fc" id="L473">					NamedArgument tempArg = getNamedArgument(splitShortNamedArg[1].charAt(0));</span>
<span class="pc bpc" id="L474" title="1 of 2 branches missed.">					if(tempArg == null){</span>
<span class="nc" id="L475">						invalidNamedArgument = splitShortNamedArg[1];</span>
<span class="nc" id="L476">						throw new ArgumentDoesNotExistException(argumentDoesNotExistMessage(invalidNamedArgument));</span>
					}
<span class="fc" id="L478">				}</span>
				else{ //multiple flags in one specification
<span class="fc bfc" id="L480" title="All 2 branches covered.">					for(int k = 0; k &lt; splitShortNamedArg[1].length(); k++){</span>
<span class="fc" id="L481">						NamedArgument tempArg = getNamedArgument(splitShortNamedArg[1].charAt(k));</span>
<span class="pc bpc" id="L482" title="1 of 2 branches missed.">						if(tempArg == null){</span>
<span class="nc" id="L483">							invalidNamedArgument = Character.toString(splitShortNamedArg[1].charAt(k));</span>
<span class="nc" id="L484">							throw new ArgumentDoesNotExistException(argumentDoesNotExistMessage(invalidNamedArgument));</span>
						}
					}
				}
			}
		}
<span class="fc" id="L490">	}</span>
	
	private void parseNamedArgumentValues(List&lt;NamedArgument&gt; namedArgList) throws IncorrectArgumentValueException{
<span class="fc bfc" id="L493" title="All 2 branches covered.">		for(int i = 0; i &lt; namedArgList.size(); i++){</span>
<span class="fc" id="L494">			NamedArgument currentArg = namedArgList.get(i);</span>
<span class="fc" id="L495">			String errorArg = currentArg.getName();</span>
<span class="fc" id="L496">			String[] valueSet = currentArg.getValueSet();</span>
<span class="fc bfc" id="L497" title="All 2 branches covered.">			if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L498">				Boolean valueSetContainsArgValue = false;</span>
<span class="fc" id="L499">				String errorValue = &quot;&quot;;</span>
<span class="fc bfc" id="L500" title="All 2 branches covered.">				for(int j = 0; j &lt; valueSet.length; j++){</span>
<span class="pc bpc" id="L501" title="1 of 2 branches missed.">					if(currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="nc" id="L502">						int intValue = (Integer)currentArg.getValue();</span>
<span class="nc bnc" id="L503" title="All 2 branches missed.">						if(valueSet[j].equals(Integer.toString(intValue))){</span>
<span class="nc" id="L504">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L506">						errorValue = Integer.toString(intValue);</span>
<span class="nc" id="L507">					}</span>
<span class="pc bpc" id="L508" title="1 of 2 branches missed.">					else if(currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="nc" id="L509">						float floatValue = (Float)currentArg.getValue();</span>
<span class="nc bnc" id="L510" title="All 2 branches missed.">						if(valueSet[j].equals(Float.toString(floatValue))){</span>
<span class="nc" id="L511">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L513">						errorValue = Float.toString(floatValue);</span>
<span class="nc" id="L514">					}</span>
<span class="pc bpc" id="L515" title="1 of 2 branches missed.">					else if(currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L516">						String stringValue = (String)currentArg.getValue();</span>
<span class="fc bfc" id="L517" title="All 2 branches covered.">						if(valueSet[j].equals(stringValue)){</span>
<span class="fc" id="L518">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L520">						errorValue = stringValue;</span>
<span class="fc" id="L521">					}</span>
					else{
<span class="nc" id="L523">						Boolean boolValue = (Boolean)currentArg.getValue();</span>
<span class="nc bnc" id="L524" title="All 2 branches missed.">						if(valueSet[j].equals(boolValue)){</span>
<span class="nc" id="L525">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L527">						errorValue = Boolean.toString(boolValue);</span>
					}
				}
<span class="fc bfc" id="L530" title="All 2 branches covered.">				if(!valueSetContainsArgValue){</span>
<span class="fc" id="L531">					throw new IncorrectArgumentValueException(incorrectArgumentValueMessage(errorArg, errorValue));</span>
				}
			}
		}
<span class="fc" id="L535">	}</span>
	
	private void parsePositionalArgumentValues(List&lt;PositionalArgument&gt; posArgList) throws IncorrectArgumentValueException{
<span class="fc bfc" id="L538" title="All 2 branches covered.">		for(int i = 0; i &lt; posArgList.size(); i++){</span>
<span class="fc" id="L539">			PositionalArgument currentArg = posArgList.get(i);</span>
<span class="fc" id="L540">			String errorArg = currentArg.getName();</span>
<span class="fc" id="L541">			String[] valueSet = currentArg.getValueSet();</span>
<span class="fc bfc" id="L542" title="All 2 branches covered.">			if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L543">				Boolean valueSetContainsArgValue = false;</span>
<span class="fc" id="L544">				String errorValue = &quot;&quot;;</span>
<span class="fc bfc" id="L545" title="All 2 branches covered.">				for(int j = 0; j &lt; valueSet.length; j++){</span>
<span class="fc bfc" id="L546" title="All 2 branches covered.">					if(currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L547">						int intValue = (Integer)currentArg.getValue();</span>
<span class="fc bfc" id="L548" title="All 2 branches covered.">						if(valueSet[j].equals(Integer.toString(intValue))){</span>
<span class="fc" id="L549">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L551">						errorValue = Integer.toString(intValue);</span>
<span class="fc" id="L552">					}</span>
<span class="pc bpc" id="L553" title="1 of 2 branches missed.">					else if(currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="fc" id="L554">						float floatValue = (Float)currentArg.getValue();</span>
<span class="fc bfc" id="L555" title="All 2 branches covered.">						if(valueSet[j].equals(Float.toString(floatValue))){</span>
<span class="fc" id="L556">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L558">						errorValue = Float.toString(floatValue);</span>
<span class="fc" id="L559">					}</span>
<span class="nc bnc" id="L560" title="All 2 branches missed.">					else if(currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="nc" id="L561">						String stringValue = (String)currentArg.getValue();</span>
<span class="nc bnc" id="L562" title="All 2 branches missed.">						if(valueSet[j].equals(stringValue)){</span>
<span class="nc" id="L563">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L565">						errorValue = stringValue;</span>
<span class="nc" id="L566">					}</span>
					else{
<span class="nc" id="L568">						Boolean boolValue = (Boolean)currentArg.getValue();</span>
<span class="nc bnc" id="L569" title="All 2 branches missed.">						if(valueSet[j].equals(Boolean.toString(boolValue))){</span>
<span class="nc" id="L570">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L572">						errorValue = Boolean.toString(boolValue);</span>
					}
					
				}
<span class="fc bfc" id="L576" title="All 2 branches covered.">				if(!valueSetContainsArgValue){</span>
<span class="fc" id="L577">					throw new IncorrectArgumentValueException(incorrectArgumentValueMessage(errorArg, errorValue));</span>
				}
			}
		}
<span class="fc" id="L581">	}</span>
	//usage: java VolumeCalculator length width height
    //VolumeCalculator.java: error: argument width: invalid float value: something
	private String incorrectArgumentValueMessage(String argName, String argValue){
<span class="fc" id="L585">		String message = &quot;usage: java &quot; + programName;</span>
<span class="fc" id="L586">		message += &quot;\nrequired:&quot;;</span>
<span class="fc bfc" id="L587" title="All 2 branches covered.">		for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L588">			PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L589">			message += &quot; &quot; + currentArg.getName();</span>
		}
<span class="fc" id="L591">		message += &quot;\noptional:&quot;;</span>
<span class="fc bfc" id="L592" title="All 2 branches covered.">		for(int j = 0; j &lt; namedArgumentList.size(); j++){</span>
<span class="fc" id="L593">			NamedArgument currentArg = namedArgumentList.get(j);</span>
<span class="fc" id="L594">			message += &quot; &quot; + currentArg.getName();</span>
		}
<span class="fc" id="L596">		message += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + argName + &quot;: invalid value: &quot; + argValue;</span>
<span class="fc" id="L597">		return message;</span>
	}
	
	private String argumentDoesNotExistMessage(String invalidNamedArgument){
<span class="fc" id="L601">		String message = &quot;usage: java &quot; + programName;</span>
<span class="fc bfc" id="L602" title="All 2 branches covered.">		for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L603">			PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L604">            message += &quot; &quot; + currentArg.getName();   </span>
        }
        
<span class="fc" id="L607">        message += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + invalidNamedArgument + &quot; does not exist&quot;;</span>
        
<span class="fc" id="L609">    	return message;</span>
	}
	
	public void parse(String[] args) throws HelpException, IncorrectNumberOfArgsException, IncorrectArgTypeException, ArgumentDoesNotExistException, IncorrectArgumentValueException{
<span class="fc" id="L613">		ArrayList&lt;String&gt; tempPositionalArgList = getPositionalArgs(args);</span>
		
<span class="fc" id="L615">		setLongFormNamedArgValues(args);</span>
<span class="fc" id="L616">		setShortFormNamedArgValues(args);</span>
<span class="fc" id="L617">		invalidNamedArgument(args); //throws ArgumentDoesNotExistException</span>
		
<span class="fc" id="L619">        NamedArgument helpArgument = getNamedArgument(&quot;help&quot;);</span>
<span class="fc bfc" id="L620" title="All 2 branches covered.">        if (helpArgument != null){</span>
<span class="fc" id="L621">			String helpArgValue = (String)helpArgument.getValue();</span>
<span class="fc bfc" id="L622" title="All 2 branches covered.">			if (helpArgValue.equals(&quot;true&quot;)){</span>
<span class="fc" id="L623">				throw new HelpException(helpMessage());</span>
			}
        }
        
<span class="fc bfc" id="L627" title="All 2 branches covered.">		if (positionalArgumentList.size() != tempPositionalArgList.size()){</span>
<span class="fc" id="L628">				throw new IncorrectNumberOfArgsException(incorrectNumberOfArgsMessage(tempPositionalArgList));</span>
		}
<span class="pc bpc" id="L630" title="1 of 2 branches missed.">		else if (positionalArgumentList.size() == tempPositionalArgList.size()){</span>
<span class="fc bfc" id="L631" title="All 2 branches covered.">			for(int i = 0; i &lt; tempPositionalArgList.size(); i++){</span>
<span class="fc" id="L632">   				PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L633">   				currentArg.setValue(tempPositionalArgList.get(i));</span>
   			}
			try{
<span class="fc" id="L636">				parseDataType(tempPositionalArgList);</span>
			}
<span class="fc" id="L638">			catch (Exception e){</span>
<span class="fc" id="L639">				throw new IncorrectArgTypeException(incorrectDataTypeMessage(tempPositionalArgList));</span>
<span class="fc" id="L640">			}</span>
<span class="fc" id="L641">			parseNamedArgumentValues(namedArgumentList); //throws IncorrectArgumentValueException</span>
<span class="fc" id="L642">			parsePositionalArgumentValues(positionalArgumentList); //throws IncorrectArgumentValueException</span>
		}	
<span class="fc" id="L644">	}</span>
	
	public void writeToXMLFile(String fileName){
<span class="fc" id="L647">		File outputFile = new File(fileName);</span>
		try{
<span class="fc" id="L649">			PrintWriter outputFileWriter = new PrintWriter(outputFile);</span>
<span class="fc" id="L650">			outputFileWriter.println(&quot;&lt;?xml version=&quot; + &quot;\&quot;1.0\&quot;?&gt;&quot;);</span>
<span class="fc" id="L651">			outputFileWriter.println(&quot;&lt;program&gt;&quot;);</span>
<span class="fc" id="L652">				outputFileWriter.println(&quot;&lt;name&gt;&quot; + getProgramName() + &quot;&lt;/name&gt;&quot;);</span>
<span class="fc" id="L653">				outputFileWriter.println(&quot;&lt;description&gt;&quot; + getProgramDescription() + &quot;&lt;/description&gt;&quot;);</span>
<span class="fc" id="L654">				outputFileWriter.println(&quot;&lt;arguments&gt;&quot;);</span>
			
<span class="fc bfc" id="L656" title="All 2 branches covered.">				for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L657">					PositionalArgument posArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L658">					outputFileWriter.println(&quot;&lt;positional&gt;&quot;);</span>
<span class="fc" id="L659">						outputFileWriter.println(&quot;&lt;name&gt;&quot; + posArg.getName() + &quot;&lt;/name&gt;&quot;);</span>
<span class="fc" id="L660">						outputFileWriter.println(&quot;&lt;type&gt;&quot; + posArg.getType() + &quot;&lt;/type&gt;&quot;);</span>
<span class="fc" id="L661">						outputFileWriter.println(&quot;&lt;description&gt;&quot; + posArg.getDescription() + &quot;&lt;/description&gt;&quot;);</span>
<span class="fc" id="L662">						outputFileWriter.println(&quot;&lt;position&gt;&quot; + (posArg.getPosition() + 1) + &quot;&lt;/position&gt;&quot;); //prints position starting at 1</span>
<span class="fc" id="L663">						String[] valueSet = posArg.getValueSet();</span>
<span class="fc bfc" id="L664" title="All 2 branches covered.">						if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L665">							String line = &quot;&lt;valueset&gt;&quot;;</span>
<span class="fc" id="L666">							line += valueSet[0];</span>
<span class="fc bfc" id="L667" title="All 2 branches covered.">							for(int j = 1; j &lt; valueSet.length; j++){</span>
<span class="fc" id="L668">								line += &quot;,&quot; + valueSet[j];</span>
							}
<span class="fc" id="L670">							line += &quot;&lt;/valueset&gt;&quot;;	</span>
<span class="fc" id="L671">							outputFileWriter.println(line);</span>
						}
						//outputFileWriter.println(line);
<span class="fc" id="L674">					outputFileWriter.println(&quot;&lt;/positional&gt;&quot;);</span>
				}
				
<span class="fc bfc" id="L677" title="All 2 branches covered.">				for (int j = 0; j &lt; namedArgumentList.size(); j++){</span>
<span class="fc" id="L678">					NamedArgument namedArg = namedArgumentList.get(j);</span>
<span class="fc" id="L679">					outputFileWriter.println(&quot;&lt;named&gt;&quot;);</span>
<span class="fc" id="L680">						outputFileWriter.println(&quot;&lt;name&gt;&quot; + namedArg.getName() + &quot;&lt;/name&gt;&quot;);</span>
<span class="fc" id="L681">						outputFileWriter.println(&quot;&lt;shortname&gt;&quot; + namedArg.getShortFormName() + &quot;&lt;/shortname&gt;&quot;);</span>
<span class="fc" id="L682">						outputFileWriter.println(&quot;&lt;type&gt;&quot; + namedArg.getType() + &quot;&lt;/type&gt;&quot;);</span>
<span class="fc" id="L683">						outputFileWriter.println(&quot;&lt;description&gt;&quot; + namedArg.getDescription() + &quot;&lt;/description&gt;&quot;);</span>
<span class="fc" id="L684">						outputFileWriter.println(&quot;&lt;default&gt;&quot; + namedArg.getDefaultValue() + &quot;&lt;/default&gt;&quot;);</span>
<span class="fc" id="L685">						String[] valueSet = namedArg.getValueSet();</span>
<span class="fc bfc" id="L686" title="All 2 branches covered.">						if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L687">							String line = &quot;&lt;valueset&gt;&quot;;</span>
<span class="fc" id="L688">							line += valueSet[0];</span>
<span class="fc bfc" id="L689" title="All 2 branches covered.">							for(int k = 1; k &lt; valueSet.length; k++){</span>
<span class="fc" id="L690">								line += &quot;,&quot; + valueSet[k];</span>
							}
<span class="fc" id="L692">							line += &quot;&lt;/valueset&gt;&quot;;	</span>
<span class="fc" id="L693">							outputFileWriter.println(line);</span>
						}
<span class="fc" id="L695">					outputFileWriter.println(&quot;&lt;/named&gt;&quot;);</span>
				}
				
<span class="fc" id="L698">				outputFileWriter.println(&quot;&lt;/arguments&gt;&quot;);</span>
<span class="fc" id="L699">			outputFileWriter.println(&quot;&lt;/program&gt;&quot;);</span>
			
<span class="fc" id="L701">			outputFileWriter.close();</span>
		}
<span class="nc" id="L703">		catch(Exception e){</span>
<span class="nc" id="L704">		System.out.println(e.getMessage());</span>
<span class="fc" id="L705">		}</span>
<span class="fc" id="L706">	}</span>
}










</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>