<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ArgumentParser.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ArgumentParser</a> &gt; <a href="index.source.html" class="el_package">edu.jsu.mcis</a> &gt; <span class="el_source">ArgumentParser.java</span></div><h1>ArgumentParser.java</h1><pre class="source lang-java linenums">/**
 @author Katie Wood
 @author Trent Ford 
 @author Andrew Green
 @author Sinh Nguyen
 @author Robert Warren
 @version 1.04 Build firebolt 9001 Nov 9, 2015.
 Argument Parser is a user-friendly library for taking in command line arguments
 and returning their user specified values. The user defines what arguments are 
 required. Then the program will parse command line info, and will automatically 
 genreate help, useage, and error messages when the program is given program 
 invalid arguments.
  
 */

package edu.jsu.mcis;

import java.util.*;
import java.lang.Object.*;
import java.io.*;


/**
 *This class parses an object (argument) and stores the value for user purposes
 *&lt;p&gt;Argument parser can store the name of the program the user wants to implement and the description of that program. &lt;/p&gt;
 *&lt;p&gt;For example, this code allows the user to add the program name and program description.
 *&lt;span style=&quot;color:#4c6b87&quot;&gt;
 *&lt;br&gt;&lt;br&gt;
 *&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp{@code ArgumentParser ap = new ArgumentParser();}
 *&lt;br&gt;
 *&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp{@code ap.addProgramName(&quot;This is the program name.&quot;);}
 *&lt;br&gt;
 *&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp{@code ap.addProgramDescription(&quot;This is the program description.&quot;);}
 *&lt;br&gt;&lt;br&gt;
 *&lt;p&gt;The program name and program description will be part of the help message and error messages printed to the command line. &lt;/p&gt;
 *&lt;br&gt;&lt;br&gt;
 *&lt;p&gt;ArgumentParser provides a way of storing arguments with different values. 
 *ArgumentParser can check the type of Object (such as String, integer, float, boolean).
 *It can also implement value sets that specify a discrete set of values for each argument. 
 *When it parses the arguments from the command line, each argument attribute will be checked and an appropriate exception will be thrown.
 *For example, this code shows how to parse arguments from the command line and print the appropriate error messages.&lt;/p&gt;
 *&lt;span style=&quot;color:#4c6b87&quot;&gt;
 *&lt;br&gt;&lt;br&gt;

 *&lt;pre&gt;
 *{@code
 try{
	ap.parse(args);
}
catch(Exception e){
	System.out.println(e.getMessage());
}
}
 *&lt;/pre&gt;
 *&lt;p&gt;In the above code, args is the String[] args pulled from the command line when the program runs. &lt;/p&gt;
 *&lt;p&gt;ArgumentParser can also read in information about the program and specific arguments from an XML file.
 *For example, the following code shows how to read information from an XML file and store it in a new ArgumentParser object.
 *&lt;/p&gt;
 *&lt;span style=&quot;color:#4c6b87&quot;&gt;
 *&lt;br&gt;&lt;br&gt;

 *&lt;pre&gt;
 *{@code
 try{
	ArgumentParser ap = XMLReader.readXMLFile(&quot;filePath&quot;);
}
catch(Exception e){
	System.out.println(e.getMessage());
}
}
 *&lt;/pre&gt;
 *&lt;p&gt;ArgumentParser can also store any information in an XML file. The following code show this.&lt;/p&gt;
  *&lt;span style=&quot;color:#4c6b87&quot;&gt;
 *&lt;br&gt;&lt;br&gt;

 *&lt;pre&gt;
 *{@code
ap.writeToXMLFile(&quot;filePath&quot;);

}
 *&lt;/pre&gt;
 *@param  url  an absolute URL giving the base location of the image
 *@param  name the location of the image, relative to the url argument
 *
 */
public class ArgumentParser {
	
	private List&lt;NamedArgument&gt; namedArgumentList; //hashmap, key would be the name of the argument
	//if short form is given from CLI, need to search for the name then find it in the map
    private List&lt;PositionalArgument&gt; positionalArgumentList;
<span class="fc" id="L91">    private String programName = &quot;&quot;;</span>
<span class="fc" id="L92">    private String programDescription = &quot;&quot;;</span>
    private int posCount;
    
    
/**
  &lt;pre&gt;
 *&lt;span style=&quot;color:#4c6b87&quot;&gt;
 *Instantiates a new instance of the Argument Parser. 
 *
 *}
 *
 */    
<span class="fc" id="L104">    public ArgumentParser(){</span>
<span class="fc" id="L105">		this.programName = &quot;&quot;;</span>
<span class="fc" id="L106">        this.programDescription = &quot;&quot;;</span>
<span class="fc" id="L107">        this.positionalArgumentList = new ArrayList&lt;PositionalArgument&gt;();</span>
<span class="fc" id="L108">        this.namedArgumentList = new ArrayList&lt;NamedArgument&gt;(); </span>
<span class="fc" id="L109">		posCount = -1;</span>
<span class="fc" id="L110">	}</span>
	
    /**
     **&lt;pre&gt;
     *&lt;span style=&quot;color:#4c6b87&quot;&gt;
     *Takes an input string and sets it as the program name
     *@param inputProgramName the string to be set as the program name
     *
     *
     */ 
	public void addProgramName(String inputProgramName){
<span class="fc" id="L121">        programName = inputProgramName;       </span>
<span class="fc" id="L122">    }</span>
    
    /**
     *Takes an input string and sets it as the program description
     *@param inputProgramDescription the string to be set as the program description
     *
     *
     *
     *
    */
    public void addProgramDescription(String inputProgramDescription){
<span class="fc" id="L133">        programDescription = inputProgramDescription;       </span>
<span class="fc" id="L134">    }</span>
    
    /** 
     *Return the name of program that was specified by the user
     *@return programName the name of the program
     */
    public String getProgramName(){
<span class="fc" id="L141">        return programName;   </span>
    }
    /**
     *Returns the description of the program set by the user
     *@return the specificed string description of the program
     */
    
    public String getProgramDescription(){
<span class="fc" id="L149">        return programDescription;   </span>
    }
    
    /** 
     *Adds a new positional argument to be parsed from the command line
     *@param arg a new instance of a positional argument
     *If a positional argument is not supplied, the program should exit, and the usage information should be displayed along with the error stating the missing argument.
     *If an additional (i.e., one too many) positional argument is specified, then the program should exit, and the usage information should be displayed along with the error stating the additional argument.
     
     */
    public void addPositionalArgument(PositionalArgument arg){
<span class="fc" id="L160">    	posCount++;</span>
<span class="fc" id="L161">    	arg.setPosition(posCount);</span>
<span class="fc" id="L162">    	positionalArgumentList.add(arg);</span>
<span class="fc" id="L163">    }</span>
    
    /**
     *Adds a new named argument to be parsed from the command line
     *@param arg a new instance of a named argument
     *
     *
     */
    public void addNamedArgument(NamedArgument arg){ 
<span class="fc" id="L172">    	namedArgumentList.add(arg);</span>
<span class="fc" id="L173">    }</span>
    
    /** 
     *Returns the positional argument with the specified string name
     *@param argName the name of the positional argument to return
     *@return the positional argument with the specified name
     *
     *
     */
    public PositionalArgument getPositionalArgument(String argName){
<span class="fc" id="L183">    	PositionalArgument returnArg = null;</span>
<span class="fc bfc" id="L184" title="All 2 branches covered.">    	for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L185">    		PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="pc bpc" id="L186" title="1 of 2 branches missed.">    		if(currentArg.getName().equals(argName)){</span>
<span class="fc" id="L187">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L190">    	return returnArg;</span>
    }
    
    /**
     *Returns the positional argument at the specified position where argPosition starts at 1
     *@param argPosition the integer position of the positional argument to find 
     *@return the positional argument with the specified position, position starts at index 1
     *
     *
     */
    public PositionalArgument getPositionalArgument(int argPosition){
<span class="fc" id="L201">    	PositionalArgument returnArg = null;</span>
<span class="fc bfc" id="L202" title="All 2 branches covered.">    	for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L203">    		PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc bfc" id="L204" title="All 2 branches covered.">    		if(currentArg.getPosition() == argPosition - 1){</span>
<span class="fc" id="L205">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L208">    	return returnArg;</span>
    }
    
    /**
     *Returns the named argument with the specified string name
     *@param argName the specified string name
     *@return the named argument with the specified string name
     */
    public NamedArgument getNamedArgument(String argName){
<span class="fc" id="L217">    	NamedArgument returnArg = null;</span>
<span class="fc bfc" id="L218" title="All 2 branches covered.">    	for(int i = 0; i &lt; namedArgumentList.size(); i++){</span>
<span class="fc" id="L219">    		NamedArgument currentArg = namedArgumentList.get(i);</span>
<span class="fc bfc" id="L220" title="All 2 branches covered.">    		if(currentArg.getName().equals(argName)){</span>
<span class="fc" id="L221">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L224">    	return returnArg;</span>
    }
    
    /**
     *Returns the named argument with the specified character short form name
     *@param argShortFormName the specified character short form name
     *@return the named argument with the specified char short form name
     */
    public NamedArgument getNamedArgument(char argShortFormName){
<span class="fc" id="L233">    	NamedArgument returnArg = null;</span>
<span class="fc bfc" id="L234" title="All 2 branches covered.">    	for(int i = 0; i &lt; namedArgumentList.size(); i++){</span>
<span class="fc" id="L235">    		NamedArgument currentArg = namedArgumentList.get(i);</span>
<span class="fc bfc" id="L236" title="All 2 branches covered.">    		if(currentArg.getShortFormName() == argShortFormName){</span>
<span class="fc" id="L237">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L240">    	return returnArg;</span>
    }
    
    //used in parseDataType 
    private Boolean parseBool(String arg) throws NumberFormatException{
<span class="fc" id="L245">    	String newArg = arg.toLowerCase();</span>
<span class="fc bfc" id="L246" title="All 2 branches covered.">    	if(newArg.equals(&quot;true&quot;)){</span>
<span class="fc" id="L247">    		return true;</span>
    	}
<span class="fc bfc" id="L249" title="All 2 branches covered.">    	else if(newArg.equals(&quot;false&quot;)){</span>
<span class="fc" id="L250">    		return false;</span>
    	}
    	else{
<span class="fc" id="L253">    		throw new NumberFormatException();</span>
    	}
    }
    
    private String usageMessage(){
<span class="fc" id="L258">    	String message = &quot;usage: java &quot; + programName + &quot; required:&quot;;</span>
<span class="fc bfc" id="L259" title="All 2 branches covered.">		for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L260">			PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L261">			message += &quot; &quot; + currentArg.getName();   </span>
		}
<span class="fc" id="L263">		return message;</span>
    }
    
 	//used in parseDataType, setLongFormNamedArgValues, setShortFormNamedArgValues, and incorrectDataTypeMessage
    int incorrectDataTypeIndex;
    String incorrectArgumentType; 
    
    private void parseDataType(ArrayList&lt;String&gt; argList) throws NumberFormatException{
        
        //checking positional args
<span class="fc bfc" id="L273" title="All 2 branches covered.">		for (int index = 0; index &lt; argList.size(); index++){</span>
<span class="fc" id="L274">			incorrectDataTypeIndex = index;</span>
<span class="fc" id="L275">			incorrectArgumentType = &quot;positional&quot;;</span>
<span class="fc" id="L276">			PositionalArgument currentArg = positionalArgumentList.get(index);</span>
<span class="fc bfc" id="L277" title="All 2 branches covered.">			if (currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L278">				int argValue = Integer.parseInt(argList.get(index));</span>
<span class="fc" id="L279">				currentArg.setValue(argList.get(index));</span>
				//currentArg.setValue(argValue);
<span class="fc" id="L281">			}</span>
            
<span class="fc bfc" id="L283" title="All 2 branches covered.">			else if (currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="fc" id="L284">				float argValue = Float.parseFloat(argList.get(index));</span>
<span class="fc" id="L285">				currentArg.setValue(argList.get(index));</span>
<span class="fc" id="L286">			}</span>
            
<span class="fc bfc" id="L288" title="All 2 branches covered.">			else if (currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L289">				String argValue = argList.get(index);</span>
<span class="fc" id="L290">				currentArg.setValue(argValue);</span>
<span class="fc" id="L291">			}</span>
			
			else{
<span class="fc" id="L294">				Boolean argValue = parseBool(argList.get(index));</span>
<span class="fc" id="L295">				currentArg.setValue(argList.get(index));</span>
			}
		}
<span class="fc" id="L298">    }</span>
    
    private String incorrectDataTypeMessage(ArrayList&lt;String&gt; argList){
<span class="fc" id="L301">		String errorMessage = this.usageMessage();</span>
		
<span class="fc bfc" id="L303" title="All 2 branches covered.">		if (incorrectArgumentType.equals(&quot;positional&quot;)){</span>
<span class="fc" id="L304">			PositionalArgument currentArg = positionalArgumentList.get(incorrectDataTypeIndex); </span>
<span class="fc" id="L305">			errorMessage += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + currentArg.getName() + &quot;: invalid &quot;+ currentArg.getType() + &quot; value: &quot; + argList.get(incorrectDataTypeIndex);</span>
<span class="fc" id="L306">			return errorMessage;  </span>
		}
		else {
<span class="fc" id="L309">			NamedArgument currentArg = namedArgumentList.get(incorrectDataTypeIndex); </span>
<span class="fc" id="L310">			errorMessage += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + currentArg.getName() + &quot;: invalid &quot;+ currentArg.getType() + &quot; value: &quot; + incorrectArgValueForSpecifiedDataType;</span>
<span class="fc" id="L311">			return errorMessage; </span>
		}  	
    }
   
   private String incorrectNumberOfArgsMessage(ArrayList&lt;String&gt; argList){
<span class="fc" id="L316">   		int numOfArgs = positionalArgumentList.size();</span>
<span class="fc bfc" id="L317" title="All 2 branches covered.">   		if(argList.size() &lt; numOfArgs){</span>
<span class="fc" id="L318">            String message = this.usageMessage();</span>
            
<span class="fc" id="L320">            message += &quot;\n&quot; + programName + &quot;.java: error: the following arguments are required:&quot;;</span>
            
<span class="fc bfc" id="L322" title="All 2 branches covered.">            for(int j = argList.size(); j &lt; numOfArgs; j++){</span>
<span class="fc" id="L323">            	PositionalArgument currentArg = positionalArgumentList.get(j);</span>
<span class="fc" id="L324">            	message += &quot; &quot; + currentArg.getName();</span>
            }
            
<span class="fc" id="L327">   			return message;</span>
   		}
        
   		else {
<span class="fc" id="L331">            String message = this.usageMessage();</span>
            
<span class="fc" id="L333">            message += &quot;\n&quot; + programName + &quot;.java: error: unrecognized arguments:&quot;;</span>
            
<span class="fc bfc" id="L335" title="All 2 branches covered.">            for(int j = numOfArgs; j &lt; argList.size(); j++){</span>
<span class="fc" id="L336">            	message += &quot; &quot; + argList.get(j);</span>
            }
<span class="fc" id="L338">   			return message;</span>
   		}
   }
    
    private String helpMessage(){
<span class="fc" id="L343">		String helpMessage = this.usageMessage();</span>
		
        /*for(int i = 0; i &lt; namedArgumentList.size(); i++){
        	NamedArgument namedArg = namedArgumentList.get(i);
        	helpMessage += &quot; [&quot; + namedArg.getName() + &quot;]&quot;;
        }*/
<span class="fc" id="L349">		helpMessage += &quot;\n&quot; + programDescription + &quot;\npositional arguments:&quot;;</span>
		
<span class="fc bfc" id="L351" title="All 2 branches covered.">        for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L352">			PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L353">			helpMessage += &quot;\n[&quot; + currentArg.getName() + &quot;] (&quot; + currentArg.getType() + &quot;) &quot; + currentArg.getDescription();   </span>
		}
		
<span class="fc" id="L356">		helpMessage += &quot;\nnamed arguments:&quot;;</span>
		
<span class="fc bfc" id="L358" title="All 2 branches covered.">		for(int i = 0; i &lt; namedArgumentList.size(); i++) {</span>
<span class="fc" id="L359">			NamedArgument currentArg = namedArgumentList.get(i);</span>
<span class="fc" id="L360">			helpMessage += &quot;\n[--&quot; + currentArg.getName() + &quot;] [-&quot; + currentArg.getShortFormName() + &quot;] (&quot; + currentArg.getType() + &quot;) &quot; + currentArg.getDescription() + &quot; (optional)&quot;;   </span>
		}

<span class="fc" id="L363">		return helpMessage;</span>
    }
    
   
    
    private ArrayList&lt;String&gt; getPositionalArgs(String[] args){
<span class="fc" id="L369">    	ArrayList&lt;String&gt; posArgList = new ArrayList&lt;String&gt;(); </span>
<span class="fc bfc" id="L370" title="All 2 branches covered.">    	for(int i = 0; i &lt; args.length; i++){ //going through args from CLI</span>
<span class="fc bfc" id="L371" title="All 4 branches covered.">    		if(!args[i].startsWith(&quot;-&quot;) &amp;&amp; i == 0){ //test if the first arg is a positional arg</span>
<span class="fc" id="L372">    			posArgList.add(args[i]);</span>
    		}
<span class="fc bfc" id="L374" title="All 2 branches covered.">    		else if(!args[i].startsWith(&quot;-&quot;)){ //arg from CLI doesn't have a dash</span>
<span class="fc bfc" id="L375" title="All 2 branches covered.">    			if(!args[i-1].startsWith(&quot;-&quot;)){ //if the one before it doesn't have a dash, then it's a pos arg</span>
<span class="fc" id="L376">    				posArgList.add(args[i]);</span>
    			}
    			else{ 
<span class="fc" id="L379">    				String[] tempNamedArg = new String[2];</span>
<span class="fc bfc" id="L380" title="All 2 branches covered.">    				if(args[i-1].startsWith(&quot;--&quot;)){ </span>
<span class="fc" id="L381">    					tempNamedArg = args[i-1].split(&quot;--&quot;);</span>
<span class="fc bfc" id="L382" title="All 2 branches covered.">    					for(int j = 0; j &lt; namedArgumentList.size(); j++){ //g</span>
<span class="fc" id="L383">    						NamedArgument currentNamedArg = namedArgumentList.get(j);</span>
<span class="fc bfc" id="L384" title="All 2 branches covered.">    						if(currentNamedArg.getName().equals(tempNamedArg[1])) {</span>
<span class="fc bfc" id="L385" title="All 2 branches covered.">								if(currentNamedArg.getType().equals(&quot;boolean&quot;)){  //to pos args</span>
<span class="fc" id="L386">									posArgList.add(args[i]);</span>
								}
							}
    					}
    				}
    				else{ 
<span class="fc" id="L392">    					tempNamedArg = args[i-1].split(&quot;-&quot;);</span>
<span class="fc bfc" id="L393" title="All 2 branches covered.">						if(tempNamedArg[1].length() == 1){ </span>
<span class="fc bfc" id="L394" title="All 2 branches covered.">							for(int j = 0; j &lt; namedArgumentList.size(); j++){ </span>
<span class="fc" id="L395">								NamedArgument currentNamedArg = namedArgumentList.get(j);</span>
<span class="fc bfc" id="L396" title="All 2 branches covered.">								if(Character.toString(currentNamedArg.getShortFormName()).equals(tempNamedArg[1])) {</span>
<span class="fc bfc" id="L397" title="All 2 branches covered.">									if(currentNamedArg.getType().equals(&quot;boolean&quot;)){ </span>
<span class="fc" id="L398">										posArgList.add(args[i]);</span>
									}
								}
							}
						}
						else{
<span class="fc" id="L404">							posArgList.add(args[i]);</span>
						}
    				}
    			}
    		}
    	}
<span class="fc" id="L410">    	return posArgList;</span>
    }
    
    //used in incorrectDataTypeMessage
    String incorrectArgValueForSpecifiedDataType;
    
    private void setLongFormNamedArgValues(String[] args) throws NumberFormatException{
<span class="fc bfc" id="L417" title="All 2 branches covered.">    	for(int i = 0; i &lt; args.length; i++){</span>
<span class="fc" id="L418">    		String[] tempNamedArg = new String[2];</span>
<span class="fc bfc" id="L419" title="All 2 branches covered.">    		if(args[i].startsWith(&quot;--&quot;)){</span>
<span class="fc" id="L420">    			tempNamedArg = args[i].split(&quot;--&quot;);</span>
<span class="fc bfc" id="L421" title="All 2 branches covered.">    			for(int j = 0; j &lt; namedArgumentList.size(); j++){</span>
<span class="fc" id="L422">    				incorrectDataTypeIndex = j;</span>
<span class="fc" id="L423">    				incorrectArgumentType = &quot;named&quot;;</span>
<span class="fc" id="L424">    				NamedArgument currentArg = namedArgumentList.get(j);</span>
<span class="fc bfc" id="L425" title="All 2 branches covered.">    				if(currentArg.getName().equals(tempNamedArg[1])){</span>
<span class="fc bfc" id="L426" title="All 2 branches covered.">    					if(!currentArg.getType().equals(&quot;boolean&quot;)){</span>
<span class="fc" id="L427">    						incorrectArgValueForSpecifiedDataType = args[i+1];</span>
<span class="fc bfc" id="L428" title="All 2 branches covered.">    						if (currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L429">								int argValue = Integer.parseInt(args[i+1]);</span>
<span class="fc" id="L430">								currentArg.setValue(args[i+1]);</span>
<span class="fc" id="L431">							}</span>
			
<span class="fc bfc" id="L433" title="All 2 branches covered.">							else if (currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="fc" id="L434">								float argValue = Float.parseFloat(args[i+1]);</span>
<span class="fc" id="L435">								currentArg.setValue(args[i+1]);</span>
<span class="fc" id="L436">							}</span>
			
<span class="pc bpc" id="L438" title="1 of 2 branches missed.">							else if (currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L439">								currentArg.setValue(args[i+1]);</span>
							}
    					}
    					else{
<span class="fc" id="L443">    						currentArg.setValue(&quot;true&quot;);</span>
    					}
    				}
    			}
    		}
    	}
<span class="fc" id="L449">    }</span>
    private void setShortFormNamedArgValues(String[] args) throws NumberFormatException{
<span class="fc bfc" id="L451" title="All 2 branches covered.">		for(int i = 0; i &lt; args.length; i++){</span>
<span class="fc" id="L452">			String[] tempNamedArg = new String[2];</span>
<span class="fc bfc" id="L453" title="All 2 branches covered.">			if(args[i].startsWith(&quot;-&quot;)){</span>
<span class="fc" id="L454">				tempNamedArg = args[i].split(&quot;-&quot;);</span>
<span class="fc bfc" id="L455" title="All 2 branches covered.">				for(int k = 0; k &lt; namedArgumentList.size(); k++){</span>
<span class="fc" id="L456">					incorrectDataTypeIndex = k;</span>
<span class="fc" id="L457">					incorrectArgumentType = &quot;named&quot;;</span>
<span class="fc" id="L458">					NamedArgument currentNamedArg = namedArgumentList.get(k);</span>
<span class="fc bfc" id="L459" title="All 2 branches covered.">					if(tempNamedArg[1].length() == 1){ //single char</span>
<span class="fc bfc" id="L460" title="All 2 branches covered.">						if(Character.toString(currentNamedArg.getShortFormName()).equals(tempNamedArg[1])){</span>
<span class="fc bfc" id="L461" title="All 2 branches covered.">							if(!currentNamedArg.getType().equals(&quot;boolean&quot;)){</span>
<span class="fc" id="L462">								incorrectArgValueForSpecifiedDataType = args[i+1];	</span>
<span class="fc bfc" id="L463" title="All 2 branches covered.">								if (currentNamedArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L464">									int argValue = Integer.parseInt(args[i+1]);</span>
<span class="fc" id="L465">									currentNamedArg.setValue(args[i+1]);</span>
<span class="fc" id="L466">								}</span>
			
<span class="fc bfc" id="L468" title="All 2 branches covered.">								else if (currentNamedArg.getType().equals(&quot;float&quot;)){</span>
<span class="fc" id="L469">									float argValue = Float.parseFloat(args[i+1]);</span>
<span class="fc" id="L470">									currentNamedArg.setValue(args[i+1]);</span>
<span class="fc" id="L471">								}</span>
			
<span class="pc bpc" id="L473" title="1 of 2 branches missed.">								else if (currentNamedArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L474">									currentNamedArg.setValue(args[i+1]);</span>
								}
    					
							}
							else{
<span class="fc" id="L479">								currentNamedArg.setValue(&quot;true&quot;);</span>
							}
						}
					}
					else{ //multiple flags in one specification
<span class="fc bfc" id="L484" title="All 2 branches covered.">						for(int j = 0; j &lt; tempNamedArg[1].length(); j++){</span>
<span class="fc bfc" id="L485" title="All 2 branches covered.">							if(currentNamedArg.getShortFormName() == tempNamedArg[1].charAt(j)){</span>
<span class="fc" id="L486">								currentNamedArg.setValue(&quot;true&quot;);</span>
							}
						}
					}
				}
			}
		}
<span class="fc" id="L493">	}</span>
<span class="fc" id="L494">	String invalidNamedArgument = &quot;&quot;;</span>
	
	private void invalidNamedArgument(String[] args) throws ArgumentDoesNotExistException{
<span class="fc bfc" id="L497" title="All 2 branches covered.">		for(int i = 0; i &lt; args.length; i++){</span>
<span class="fc bfc" id="L498" title="All 2 branches covered.">			if(args[i].startsWith(&quot;--&quot;)){</span>
<span class="fc" id="L499">				String[] splitLongNamedArg = new String[2];</span>
<span class="fc" id="L500">				splitLongNamedArg = args[i].split(&quot;--&quot;);</span>
<span class="fc" id="L501">				NamedArgument tempArg = getNamedArgument(splitLongNamedArg[1]);</span>
<span class="fc bfc" id="L502" title="All 2 branches covered.">				if(tempArg == null){</span>
<span class="fc" id="L503">					invalidNamedArgument = splitLongNamedArg[1];</span>
<span class="fc" id="L504">					throw new ArgumentDoesNotExistException(argumentDoesNotExistMessage(invalidNamedArgument));</span>
				}
<span class="fc" id="L506">			}</span>
<span class="fc bfc" id="L507" title="All 2 branches covered.">			else if(args[i].startsWith(&quot;-&quot;)){</span>
<span class="fc" id="L508">				String[] splitShortNamedArg = new String[2];</span>
<span class="fc" id="L509">				splitShortNamedArg = args[i].split(&quot;-&quot;);</span>
<span class="fc bfc" id="L510" title="All 2 branches covered.">				if(splitShortNamedArg[1].length() == 1){ //single char</span>
<span class="fc" id="L511">					NamedArgument tempArg = getNamedArgument(splitShortNamedArg[1].charAt(0));</span>
<span class="fc bfc" id="L512" title="All 2 branches covered.">					if(tempArg == null){</span>
<span class="fc" id="L513">						invalidNamedArgument = splitShortNamedArg[1];</span>
<span class="fc" id="L514">						throw new ArgumentDoesNotExistException(argumentDoesNotExistMessage(invalidNamedArgument));</span>
					}
<span class="fc" id="L516">				}</span>
				else{
<span class="fc bfc" id="L518" title="All 2 branches covered.">					for(int k = 0; k &lt; splitShortNamedArg[1].length(); k++){</span>
<span class="fc" id="L519">						NamedArgument tempArg = getNamedArgument(splitShortNamedArg[1].charAt(k));</span>
<span class="fc bfc" id="L520" title="All 2 branches covered.">						if(tempArg == null){</span>
<span class="fc" id="L521">							invalidNamedArgument = Character.toString(splitShortNamedArg[1].charAt(k));</span>
<span class="fc" id="L522">							throw new ArgumentDoesNotExistException(argumentDoesNotExistMessage(invalidNamedArgument));</span>
						}
					}
				}
			}
		}
<span class="fc" id="L528">	}</span>
	
	
	private void parseNamedArgumentValues(List&lt;NamedArgument&gt; namedArgList) throws IncorrectArgumentValueException{
<span class="fc bfc" id="L532" title="All 2 branches covered.">		for(int i = 0; i &lt; namedArgList.size(); i++){</span>
<span class="fc" id="L533">			NamedArgument currentArg = namedArgList.get(i);</span>
<span class="fc" id="L534">			String errorArg = currentArg.getName();</span>
<span class="fc" id="L535">			String[] valueSet = currentArg.getValueSet();</span>
<span class="fc bfc" id="L536" title="All 2 branches covered.">			if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L537">				Boolean valueSetContainsArgValue = false;</span>
<span class="fc" id="L538">				String errorValue = &quot;&quot;;</span>
<span class="fc bfc" id="L539" title="All 2 branches covered.">				for(int j = 0; j &lt; valueSet.length; j++){</span>
<span class="fc bfc" id="L540" title="All 2 branches covered.">					if(currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L541">						int intValue = (Integer)currentArg.getValue();</span>
<span class="fc bfc" id="L542" title="All 2 branches covered.">						if(valueSet[j].equals(Integer.toString(intValue))){</span>
<span class="fc" id="L543">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L545">						errorValue = Integer.toString(intValue);</span>
<span class="fc" id="L546">					}</span>
<span class="fc bfc" id="L547" title="All 2 branches covered.">					else if(currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="fc" id="L548">						float floatValue = (Float)currentArg.getValue();</span>
<span class="fc bfc" id="L549" title="All 2 branches covered.">						if(valueSet[j].equals(Float.toString(floatValue))){</span>
<span class="fc" id="L550">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L552">						errorValue = Float.toString(floatValue);</span>
<span class="fc" id="L553">					}</span>
<span class="pc bpc" id="L554" title="1 of 2 branches missed.">					else if(currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L555">						String stringValue = (String)currentArg.getValue();</span>
<span class="fc bfc" id="L556" title="All 2 branches covered.">						if(valueSet[j].equals(stringValue)){</span>
<span class="fc" id="L557">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L559">						errorValue = stringValue;</span>
					}
					/*else{
						Boolean boolValue = (Boolean)currentArg.getValue();
						if(valueSet[j].equals(boolValue)){
							valueSetContainsArgValue = true;
						}
						errorValue = Boolean.toString(boolValue);
					}*/
				}
<span class="fc bfc" id="L569" title="All 2 branches covered.">				if(!valueSetContainsArgValue){</span>
<span class="fc" id="L570">					throw new IncorrectArgumentValueException(incorrectArgumentValueMessage(errorArg, errorValue));</span>
				}
			}
		}
<span class="fc" id="L574">	}</span>
	
	private void parsePositionalArgumentValues(List&lt;PositionalArgument&gt; posArgList) throws IncorrectArgumentValueException{
<span class="fc bfc" id="L577" title="All 2 branches covered.">		for(int i = 0; i &lt; posArgList.size(); i++){</span>
<span class="fc" id="L578">			PositionalArgument currentArg = posArgList.get(i);</span>
<span class="fc" id="L579">			String errorArg = currentArg.getName();</span>
<span class="fc" id="L580">			String[] valueSet = currentArg.getValueSet();</span>
<span class="fc bfc" id="L581" title="All 2 branches covered.">			if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L582">				Boolean valueSetContainsArgValue = false;</span>
<span class="fc" id="L583">				String errorValue = &quot;&quot;;</span>
<span class="fc bfc" id="L584" title="All 2 branches covered.">				for(int j = 0; j &lt; valueSet.length; j++){</span>
<span class="fc bfc" id="L585" title="All 2 branches covered.">					if(currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L586">						int intValue = (Integer)currentArg.getValue();</span>
<span class="fc bfc" id="L587" title="All 2 branches covered.">						if(valueSet[j].equals(Integer.toString(intValue))){</span>
<span class="fc" id="L588">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L590">						errorValue = Integer.toString(intValue);</span>
<span class="fc" id="L591">					}</span>
<span class="fc bfc" id="L592" title="All 2 branches covered.">					else if(currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="fc" id="L593">						float floatValue = (Float)currentArg.getValue();</span>
<span class="fc bfc" id="L594" title="All 2 branches covered.">						if(valueSet[j].equals(Float.toString(floatValue))){</span>
<span class="fc" id="L595">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L597">						errorValue = Float.toString(floatValue);</span>
<span class="fc" id="L598">					}</span>
<span class="pc bpc" id="L599" title="1 of 2 branches missed.">					else if(currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L600">						String stringValue = (String)currentArg.getValue();</span>
<span class="fc bfc" id="L601" title="All 2 branches covered.">						if(valueSet[j].equals(stringValue)){</span>
<span class="fc" id="L602">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L604">						errorValue = stringValue;</span>
					}
					/*else{
						Boolean boolValue = (Boolean)currentArg.getValue();
						if(valueSet[j].equals(Boolean.toString(boolValue))){
							valueSetContainsArgValue = true;
						}
						errorValue = Boolean.toString(boolValue);
					}*/
					
				}
<span class="fc bfc" id="L615" title="All 2 branches covered.">				if(!valueSetContainsArgValue){</span>
<span class="fc" id="L616">					throw new IncorrectArgumentValueException(incorrectArgumentValueMessage(errorArg, errorValue));</span>
				}
			}
		}
<span class="fc" id="L620">	}</span>
	
	private String incorrectArgumentValueMessage(String argName, String argValue){
<span class="fc" id="L623">		String message = this.usageMessage();</span>
		
<span class="fc" id="L625">		message += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + argName + &quot;: invalid value: &quot; + argValue;</span>
<span class="fc" id="L626">		return message;</span>
	}
	
	private String argumentDoesNotExistMessage(String invalidNamedArgument){
<span class="fc" id="L630">        String message = this.usageMessage();</span>
        
<span class="fc" id="L632">        message += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + invalidNamedArgument + &quot; does not exist&quot;;</span>
        
<span class="fc" id="L634">    	return message;</span>
	}
    
	/**
     *Parses input data from the command line and throws the correct exceptions if tinput data is an incorrect format
     *@param args the input data from the command line
     *@throws HelpException if the help argument is given in the input data 
     *@throws IncorrectNumberOfArgsException if an incorrect number of positional arguments is given in the input data
     *@throws IncorrectArgTypeException if an input argument is given as the wrong dataType specified by the user
     *@throws ArgumentDoesNotExistException if a named argument is given in the input data that has not been created by the user
     *@throws IncorrectArgumentValueException if the input data is not a possible value for a specified argument
     */
    
	public void parse(String[] args) throws HelpException, IncorrectNumberOfArgsException, IncorrectArgTypeException, ArgumentDoesNotExistException, IncorrectArgumentValueException{
<span class="fc" id="L648">		ArrayList&lt;String&gt; tempPositionalArgList = getPositionalArgs(args);</span>
		
		try{
<span class="fc" id="L651">			setLongFormNamedArgValues(args);</span>
<span class="fc" id="L652">			setShortFormNamedArgValues(args);</span>
		}
<span class="fc" id="L654">		catch(Exception e){</span>
<span class="fc" id="L655">			throw new IncorrectArgTypeException(incorrectDataTypeMessage(tempPositionalArgList));</span>
<span class="fc" id="L656">		}</span>
		
<span class="fc" id="L658">		invalidNamedArgument(args); //throws ArgumentDoesNotExistException</span>
		
<span class="fc" id="L660">        NamedArgument helpArgument = getNamedArgument(&quot;help&quot;);</span>
<span class="fc bfc" id="L661" title="All 2 branches covered.">        if (helpArgument != null){</span>
<span class="fc" id="L662">			Boolean helpArgValue = (Boolean)helpArgument.getValue();</span>
<span class="fc bfc" id="L663" title="All 2 branches covered.">			if (helpArgValue){</span>
<span class="fc" id="L664">				throw new HelpException(helpMessage());</span>
			}
        }
        
<span class="fc bfc" id="L668" title="All 2 branches covered.">		if (positionalArgumentList.size() != tempPositionalArgList.size()){</span>
<span class="fc" id="L669">				throw new IncorrectNumberOfArgsException(incorrectNumberOfArgsMessage(tempPositionalArgList));</span>
		}
<span class="pc bpc" id="L671" title="1 of 2 branches missed.">		else if (positionalArgumentList.size() == tempPositionalArgList.size()){</span>
<span class="fc bfc" id="L672" title="All 2 branches covered.">			for(int i = 0; i &lt; tempPositionalArgList.size(); i++){</span>
<span class="fc" id="L673">   				PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L674">   				currentArg.setValue(tempPositionalArgList.get(i));</span>
   			}
			try{
<span class="fc" id="L677">				parseDataType(tempPositionalArgList);</span>
			}
<span class="fc" id="L679">			catch (Exception e){</span>
<span class="fc" id="L680">				throw new IncorrectArgTypeException(incorrectDataTypeMessage(tempPositionalArgList));</span>
<span class="fc" id="L681">			}</span>
<span class="fc" id="L682">			parseNamedArgumentValues(namedArgumentList); //throws IncorrectArgumentValueException</span>
<span class="fc" id="L683">			parsePositionalArgumentValues(positionalArgumentList); //throws IncorrectArgumentValueException</span>
		}	
<span class="fc" id="L685">	}</span>
    
    /**
     *Writes argument parser information to the specified XML file. The program name, program description, positional arguments, and named arguments 
     *are saved in the file in standard XML format. It also saves each aspect of the arguments such as argument name, description, dataType, defaultValue, and possible value set.
     *@param fileName the XML file to which all information will be written
     */
	
	public void writeToXMLFile(String fileName){
<span class="fc" id="L694">		File outputFile = new File(fileName);</span>
		try{
<span class="fc" id="L696">			PrintWriter outputFileWriter = new PrintWriter(outputFile);</span>
<span class="fc" id="L697">			outputFileWriter.println(&quot;&lt;?xml version=&quot; + &quot;\&quot;1.0\&quot;?&gt;&quot;);</span>
<span class="fc" id="L698">			outputFileWriter.println(&quot;&lt;program&gt;&quot;);</span>
<span class="fc" id="L699">				outputFileWriter.println(&quot;&lt;name&gt;&quot; + getProgramName() + &quot;&lt;/name&gt;&quot;);</span>
<span class="fc" id="L700">				outputFileWriter.println(&quot;&lt;description&gt;&quot; + getProgramDescription() + &quot;&lt;/description&gt;&quot;);</span>
<span class="fc" id="L701">				outputFileWriter.println(&quot;&lt;arguments&gt;&quot;);</span>
			
<span class="fc bfc" id="L703" title="All 2 branches covered.">				for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L704">					PositionalArgument posArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L705">					outputFileWriter.println(&quot;&lt;positional&gt;&quot;);</span>
<span class="fc" id="L706">						outputFileWriter.println(&quot;&lt;name&gt;&quot; + posArg.getName() + &quot;&lt;/name&gt;&quot;);</span>
<span class="fc" id="L707">						outputFileWriter.println(&quot;&lt;type&gt;&quot; + posArg.getType() + &quot;&lt;/type&gt;&quot;);</span>
<span class="fc" id="L708">						outputFileWriter.println(&quot;&lt;description&gt;&quot; + posArg.getDescription() + &quot;&lt;/description&gt;&quot;);</span>
<span class="fc" id="L709">						outputFileWriter.println(&quot;&lt;position&gt;&quot; + (posArg.getPosition() + 1) + &quot;&lt;/position&gt;&quot;); //prints position starting at 1</span>
<span class="fc" id="L710">						String[] valueSet = posArg.getValueSet();</span>
<span class="fc bfc" id="L711" title="All 2 branches covered.">						if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L712">							String line = &quot;&lt;valueset&gt;&quot;;</span>
							
<span class="fc" id="L714">							line += valueSet[0];</span>
<span class="fc bfc" id="L715" title="All 2 branches covered.">							for(int j = 1; j &lt; valueSet.length; j++){</span>
<span class="fc" id="L716">								line += &quot;,&quot; + valueSet[j];</span>
							}
<span class="fc" id="L718">							line += &quot;&lt;/valueset&gt;&quot;;	</span>
<span class="fc" id="L719">							outputFileWriter.println(line);</span>
						}
						//outputFileWriter.println(line);
<span class="fc" id="L722">					outputFileWriter.println(&quot;&lt;/positional&gt;&quot;);</span>
				}
				
<span class="fc bfc" id="L725" title="All 2 branches covered.">				for (int j = 0; j &lt; namedArgumentList.size(); j++){</span>
<span class="fc" id="L726">					NamedArgument namedArg = namedArgumentList.get(j);</span>
<span class="fc" id="L727">					outputFileWriter.println(&quot;&lt;named&gt;&quot;);</span>
<span class="fc" id="L728">						outputFileWriter.println(&quot;&lt;name&gt;&quot; + namedArg.getName() + &quot;&lt;/name&gt;&quot;);</span>
<span class="fc" id="L729">						outputFileWriter.println(&quot;&lt;shortname&gt;&quot; + namedArg.getShortFormName() + &quot;&lt;/shortname&gt;&quot;);</span>
<span class="fc" id="L730">						outputFileWriter.println(&quot;&lt;type&gt;&quot; + namedArg.getType() + &quot;&lt;/type&gt;&quot;);</span>
<span class="fc" id="L731">						outputFileWriter.println(&quot;&lt;description&gt;&quot; + namedArg.getDescription() + &quot;&lt;/description&gt;&quot;);</span>
<span class="fc" id="L732">						outputFileWriter.println(&quot;&lt;default&gt;&quot; + namedArg.getDefaultValue() + &quot;&lt;/default&gt;&quot;);</span>
<span class="fc" id="L733">						String[] valueSet = namedArg.getValueSet();</span>
<span class="fc bfc" id="L734" title="All 2 branches covered.">						if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L735">							String line = &quot;&lt;valueset&gt;&quot;;</span>
<span class="fc" id="L736">							line += valueSet[0];</span>
<span class="fc bfc" id="L737" title="All 2 branches covered.">							for(int k = 1; k &lt; valueSet.length; k++){</span>
<span class="fc" id="L738">								line += &quot;,&quot; + valueSet[k];</span>
							}
<span class="fc" id="L740">							line += &quot;&lt;/valueset&gt;&quot;;	</span>
<span class="fc" id="L741">							outputFileWriter.println(line);</span>
						}
<span class="fc" id="L743">					outputFileWriter.println(&quot;&lt;/named&gt;&quot;);</span>
				}
				
<span class="fc" id="L746">				outputFileWriter.println(&quot;&lt;/arguments&gt;&quot;);</span>
<span class="fc" id="L747">			outputFileWriter.println(&quot;&lt;/program&gt;&quot;);</span>
			
<span class="fc" id="L749">			outputFileWriter.close();</span>
		}
<span class="nc" id="L751">		catch(Exception e){</span>
<span class="nc" id="L752">		System.out.println(e.getMessage());</span>
<span class="fc" id="L753">		}</span>
<span class="fc" id="L754">	}</span>
}










</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>