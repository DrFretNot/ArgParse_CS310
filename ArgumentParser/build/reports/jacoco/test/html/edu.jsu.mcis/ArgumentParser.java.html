<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ArgumentParser.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ArgumentParser</a> &gt; <a href="index.source.html" class="el_package">edu.jsu.mcis</a> &gt; <span class="el_source">ArgumentParser.java</span></div><h1>ArgumentParser.java</h1><pre class="source lang-java linenums">/**
 @author Katie Wood
 @author Trent Ford 
 @author Andrew Green
 @author Sinh Nguyen
 @author Robert Warren
 @version 1.04 Build firebolt 9001 Nov 9, 2015.
 Argument Parser is a user-friendly library for taking in command line arguments
 and returning their user specified values. The user defines what arguments are 
 required. Then the program will parse command line info, and will automatically 
 genreate help, useage, and error messages when the program is given program 
 invalid arguments.
  
 */

package edu.jsu.mcis;

import java.util.*;
import java.lang.Object.*;
import java.io.*;


/** Description of ArgumentParser:
/**
 *
 *&lt;h2&gt; 
 *&lt;span style=&quot;color:#4c6b87&quot;&gt;
 
 *INTRO TO ArgParse! 
 *&lt;/h2&gt;
 *
 *&lt;p&gt;The ArgParse_CS310 module make it easy to write user-friendly 
 *command-line interfaces. The program defines what arguments is 
 *requires, and argparse will figure out how to parse those arguments. 
 *The argparse module also automatically generates help and 
 *usage messages and issues error codes when users 
 *give program invalid arguments.&lt;/p&gt;
 *
 *@param  url  an absolute URL giving the base location of the image
 *@param  name the location of the image, relative to the url argument
 *
 */
public class ArgumentParser {
	
	private List&lt;NamedArgument&gt; namedArgumentList; //hashmap, key would be the name of the argument
	//if short form is given from CLI, need to search for the name then find it in the map
    private List&lt;PositionalArgument&gt; positionalArgumentList;
<span class="fc" id="L48">    private String programName = &quot;&quot;;</span>
<span class="fc" id="L49">    private String programDescription = &quot;&quot;;</span>
    private int posCount;
    
    
/**
  &lt;pre&gt;
 *&lt;span style=&quot;color:#4c6b87&quot;&gt;
 *{@code
 * public ArgumentParser(){
    this.programName = &quot;&quot;;
    this.programDescription = &quot;&quot;;
    this.positionalArgumentList = new ArrayList&lt;PositionalArgument&gt;();
    this.namedArgumentList = new ArrayList&lt;NamedArgument&gt;(); 
    posCount = -1;
 *}
 *The Argument Parser constructor, this will instantiate a new instance of the Parser
 *&lt;p&gt;The constructor enters the blanks for the program name and the program description. 
 *Creates a new lists for positional and named arguments. These will be used to hold the 
 *arguments that are created by the user. 
 *
 *}
 *
 */    
<span class="fc" id="L72">    public ArgumentParser(){</span>
<span class="fc" id="L73">		this.programName = &quot;&quot;;</span>
<span class="fc" id="L74">        this.programDescription = &quot;&quot;;</span>
<span class="fc" id="L75">        this.positionalArgumentList = new ArrayList&lt;PositionalArgument&gt;();</span>
<span class="fc" id="L76">        this.namedArgumentList = new ArrayList&lt;NamedArgument&gt;(); </span>
<span class="fc" id="L77">		posCount = -1;</span>
<span class="fc" id="L78">	}</span>
	
    /**
     **&lt;pre&gt;
     *&lt;span style=&quot;color:#4c6b87&quot;&gt;
     *{@code
     public void addProgramName(String inputProgramName){
        programName = inputProgramName; 
}
     *}
     *&lt;/pre&gt;
     *@param addProgramName(String inputProgramName) takes in a string program name and adds to a global string program name.
     *
     *
     */ 
	public void addProgramName(String inputProgramName){
<span class="fc" id="L94">        programName = inputProgramName;       </span>
<span class="fc" id="L95">    }</span>
    
    /**
     *&lt;pre&gt;
     {@code
     public void addProgramDescription(String inputProgramDescription){
        programDescription = inputProgramDescription; 
}
     
     
     *}
     *&lt;pre&gt;
     * 
     *@param addProgramDescription takes in a string description of a program and adds to a global string program description.
     *
     *
     *
     *
    */
    public void addProgramDescription(String inputProgramDescription){
<span class="fc" id="L115">        programDescription = inputProgramDescription;       </span>
<span class="fc" id="L116">    }</span>
    
    /** 
    Constructor description of getProgramName() 
      &lt;pre&gt;
     *&lt;span style=&quot;color:#4c6b87&quot;&gt;
     *{@code
     public String getProgramName(){
        return programName; 
     
}
     *}
     *&lt;/pre&gt;
     *@param getProgramName Receives the specified name of the program
     */
    public String getProgramName(){
<span class="fc" id="L132">        return programName;   </span>
    }
    /** Constructor description of getProgramDescription()
    *&lt;pre&gt;
     *&lt;span style=&quot;color:#4c6b87&quot;&gt;
     *{@code
     public String getProgramDescription(){
        return programDescription;   
    }
     *}
     *&lt;/pre&gt;
     *@param getProgramDescription recieves a Specified Program Description from CLI
     *@return programName Returns the specificed description of the program
     
     */
    
    public String getProgramDescription(){
<span class="fc" id="L149">        return programDescription;   </span>
    }
    
    /** 
    *&lt;pre&gt;
     *&lt;span style=&quot;color:#4c6b87&quot;&gt;
     *{@code
     public void addPositionalArgument(PositionalArgument arg){
    	posCount++;
    	arg.setPosition(posCount);
    	positionalArgumentList.add(arg);
}
     *}
     *&lt;/pre&gt;
     *@param addPositionalArgument(PositionalArgument arg)  Assume VolumeCalculator.java allows for three positional arguments, named length, width, and height, respectively. see code snippit below.
     *If a positional argument is not supplied, the program should exit, and the usage information should be displayed along with the error stating the missing argument.
     *If an additional (i.e., one too many) positional argument is specified, then the program should exit, and the usage information should be displayed along with the error stating the additional argument.
     
     */
    public void addPositionalArgument(PositionalArgument arg){
<span class="fc" id="L169">    	posCount++;</span>
<span class="fc" id="L170">    	arg.setPosition(posCount);</span>
<span class="fc" id="L171">    	positionalArgumentList.add(arg);</span>
<span class="fc" id="L172">    }</span>
    
    /**
     *&lt;pre&gt;
     *&lt;span style=&quot;color:#4c6b87&quot;&gt;
     *{@code
     *public void addNamedArgument(NamedArgument arg){ 
    	namedArgumentList.add(arg);
    }
     *  
     *}
     *&lt;/pre&gt;
     *@param addNamedArgument Users have the ability to add a specific named argument, i.e: 
     *
     *
     */
    public void addNamedArgument(NamedArgument arg){ 
<span class="fc" id="L189">    	namedArgumentList.add(arg);</span>
<span class="fc" id="L190">    }</span>
    
    /** 
    &lt;pre&gt;
     *&lt;span style=&quot;color:#4c6b87&quot;&gt;
     *{@code
     public PositionalArgument getPositionalArgument(String argName){
    	PositionalArgument returnArg = null;
    	for(int i = 0; i &lt; positionalArgumentList.size(); i++){
    		PositionalArgument currentArg = positionalArgumentList.get(i);
    		if(currentArg.getName().equals(argName)){
    			returnArg = currentArg;
     *  
     *}
     *&lt;/pre&gt;
     *Constructor description of PositionalArgument getPositionalArgument(String argName) 
     *@param PositionalArgument getPositionalArgument 
     *@return Returns the current argument name
     *
     *
     */
    public PositionalArgument getPositionalArgument(String argName){
<span class="fc" id="L212">    	PositionalArgument returnArg = null;</span>
<span class="fc bfc" id="L213" title="All 2 branches covered.">    	for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L214">    		PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="pc bpc" id="L215" title="1 of 2 branches missed.">    		if(currentArg.getName().equals(argName)){</span>
<span class="fc" id="L216">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L219">    	return returnArg;</span>
    }
    
    /**
     *
     *@Param PositionalArgument getPositionalArgument 
     *@return returnArg
     *
     *
     */
    public PositionalArgument getPositionalArgument(int argPosition){
<span class="fc" id="L230">    	PositionalArgument returnArg = null;</span>
<span class="fc bfc" id="L231" title="All 2 branches covered.">    	for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L232">    		PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc bfc" id="L233" title="All 2 branches covered.">    		if(currentArg.getPosition() == argPosition){</span>
<span class="fc" id="L234">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L237">    	return returnArg;</span>
    }
    
    /**
     *@param NamedArgument From the Command line this recieves a specified named argument, as a string, to be added to the library.
     *@return returnArg Returns the string form of the named Argument.
     */
    public NamedArgument getNamedArgument(String argName){
<span class="fc" id="L245">    	NamedArgument returnArg = null;</span>
<span class="fc bfc" id="L246" title="All 2 branches covered.">    	for(int i = 0; i &lt; namedArgumentList.size(); i++){</span>
<span class="fc" id="L247">    		NamedArgument currentArg = namedArgumentList.get(i);</span>
<span class="fc bfc" id="L248" title="All 2 branches covered.">    		if(currentArg.getName().equals(argName)){</span>
<span class="fc" id="L249">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L252">    	return returnArg;</span>
    }
    
    /**
     *
     *&lt;h2&gt; 
     *Use Cases: 
     *&lt;/h2&gt;
     **&lt;pre&gt;
     *&lt;span style=&quot;color:#4c6b87&quot;&gt;
     *{@code
     *public NamedArgument getNamedArgument(char argShortFormName){
    	NamedArgument returnArg = null;
    	for(int i = 0; i &lt; namedArgumentList.size(); i++){
    		NamedArgument currentArg = namedArgumentList.get(i);
    		if(currentArg.getShortFormName() == argShortFormName){
    			returnArg = currentArg;
    		}
    	} 
     
     *}
     *&lt;/pre&gt;
     **@param NamedArgument getNamedArgument(char argShortFormName) Allow short-form names for named arguments, in addition to long-form names
     *@return returnArg returns the short-form name to the library.
     */
    public NamedArgument getNamedArgument(char argShortFormName){
<span class="fc" id="L278">    	NamedArgument returnArg = null;</span>
<span class="fc bfc" id="L279" title="All 2 branches covered.">    	for(int i = 0; i &lt; namedArgumentList.size(); i++){</span>
<span class="fc" id="L280">    		NamedArgument currentArg = namedArgumentList.get(i);</span>
<span class="fc bfc" id="L281" title="All 2 branches covered.">    		if(currentArg.getShortFormName() == argShortFormName){</span>
<span class="fc" id="L282">    			returnArg = currentArg;</span>
    		}
    	}
<span class="fc" id="L285">    	return returnArg;</span>
    }
    
    //used in parseDataType 
    private Boolean parseBool(String arg) throws NumberFormatException{
<span class="fc" id="L290">    	String newArg = arg.toLowerCase();</span>
<span class="fc bfc" id="L291" title="All 2 branches covered.">    	if(newArg.equals(&quot;true&quot;)){</span>
<span class="fc" id="L292">    		return true;</span>
    	}
<span class="pc bpc" id="L294" title="1 of 2 branches missed.">    	else if(newArg.equals(&quot;false&quot;)){</span>
<span class="nc" id="L295">    		return false;</span>
    	}
    	else{
<span class="fc" id="L298">    		throw new NumberFormatException();</span>
    	}
    }
    
    private String usageMessage(){
<span class="fc" id="L303">    	String message = &quot;usage: java &quot; + programName + &quot; required:&quot;;</span>
<span class="fc bfc" id="L304" title="All 2 branches covered.">		for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L305">			PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L306">			message += &quot; &quot; + currentArg.getName();   </span>
		}
<span class="fc" id="L308">		return message;</span>
    }
    
 	//used in parseDataType, setLongFormNamedArgValues, setShortFormNamedArgValues, and incorrectDataTypeMessage
    int incorrectDataTypeIndex;
    String incorrectArgumentType; 
    
    private void parseDataType(ArrayList&lt;String&gt; argList) throws NumberFormatException{
        
        //checking positional args
<span class="fc bfc" id="L318" title="All 2 branches covered.">		for (int index = 0; index &lt; argList.size(); index++){</span>
<span class="fc" id="L319">			incorrectDataTypeIndex = index;</span>
<span class="fc" id="L320">			incorrectArgumentType = &quot;positional&quot;;</span>
<span class="fc" id="L321">			PositionalArgument currentArg = positionalArgumentList.get(index);</span>
<span class="fc bfc" id="L322" title="All 2 branches covered.">			if (currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L323">				int argValue = Integer.parseInt(argList.get(index));</span>
<span class="fc" id="L324">				currentArg.setValue(argList.get(index));</span>
				//currentArg.setValue(argValue);
<span class="fc" id="L326">			}</span>
            
<span class="fc bfc" id="L328" title="All 2 branches covered.">			else if (currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="fc" id="L329">				float argValue = Float.parseFloat(argList.get(index));</span>
<span class="fc" id="L330">				currentArg.setValue(argList.get(index));</span>
<span class="fc" id="L331">			}</span>
            
<span class="fc bfc" id="L333" title="All 2 branches covered.">			else if (currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L334">				String argValue = argList.get(index);</span>
<span class="fc" id="L335">				currentArg.setValue(argValue);</span>
<span class="fc" id="L336">			}</span>
			
			else{
<span class="fc" id="L339">				Boolean argValue = parseBool(argList.get(index));</span>
<span class="fc" id="L340">				currentArg.setValue(argList.get(index));</span>
			}
		}
<span class="fc" id="L343">    }</span>
    
    private String incorrectDataTypeMessage(ArrayList&lt;String&gt; argList){
<span class="fc" id="L346">		String errorMessage = this.usageMessage();</span>
		
<span class="fc bfc" id="L348" title="All 2 branches covered.">		if (incorrectArgumentType.equals(&quot;positional&quot;)){</span>
<span class="fc" id="L349">			PositionalArgument currentArg = positionalArgumentList.get(incorrectDataTypeIndex); </span>
<span class="fc" id="L350">			errorMessage += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + currentArg.getName() + &quot;: invalid &quot;+ currentArg.getType() + &quot; value: &quot; + argList.get(incorrectDataTypeIndex);</span>
<span class="fc" id="L351">			return errorMessage;  </span>
		}
		else {
<span class="fc" id="L354">			NamedArgument currentArg = namedArgumentList.get(incorrectDataTypeIndex); </span>
<span class="fc" id="L355">			errorMessage += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + currentArg.getName() + &quot;: invalid &quot;+ currentArg.getType() + &quot; value: &quot; + incorrectArgValueForSpecifiedDataType;</span>
<span class="fc" id="L356">			return errorMessage; </span>
		}  	
    }
   
   private String incorrectNumberOfArgsMessage(ArrayList&lt;String&gt; argList){
<span class="fc" id="L361">   		int numOfArgs = positionalArgumentList.size();</span>
<span class="fc bfc" id="L362" title="All 2 branches covered.">   		if(argList.size() &lt; numOfArgs){</span>
<span class="fc" id="L363">            String message = this.usageMessage();</span>
            
<span class="fc" id="L365">            message += &quot;\n&quot; + programName + &quot;.java: error: the following arguments are required:&quot;;</span>
            
<span class="fc bfc" id="L367" title="All 2 branches covered.">            for(int j = argList.size(); j &lt; numOfArgs; j++){</span>
<span class="fc" id="L368">            	PositionalArgument currentArg = positionalArgumentList.get(j);</span>
<span class="fc" id="L369">            	message += &quot; &quot; + currentArg.getName();</span>
            }
            
<span class="fc" id="L372">   			return message;</span>
   		}
        
   		else {
<span class="fc" id="L376">            String message = this.usageMessage();</span>
            
<span class="fc" id="L378">            message += &quot;\n&quot; + programName + &quot;.java: error: unrecognized arguments:&quot;;</span>
            
<span class="fc bfc" id="L380" title="All 2 branches covered.">            for(int j = numOfArgs; j &lt; argList.size(); j++){</span>
<span class="fc" id="L381">            	message += &quot; &quot; + argList.get(j);</span>
            }
<span class="fc" id="L383">   			return message;</span>
   		}
   }
    
    private String helpMessage(){
<span class="fc" id="L388">		String helpMessage = this.usageMessage();</span>
		
        /*for(int i = 0; i &lt; namedArgumentList.size(); i++){
        	NamedArgument namedArg = namedArgumentList.get(i);
        	helpMessage += &quot; [&quot; + namedArg.getName() + &quot;]&quot;;
        }*/
<span class="fc" id="L394">		helpMessage += &quot;\n&quot; + programDescription + &quot;\npositional arguments:&quot;;</span>
		
<span class="fc bfc" id="L396" title="All 2 branches covered.">        for(int i = 0; i &lt; positionalArgumentList.size(); i++) {</span>
<span class="fc" id="L397">			PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L398">			helpMessage += &quot;\n[&quot; + currentArg.getName() + &quot;] (&quot; + currentArg.getType() + &quot;) &quot; + currentArg.getDescription();   </span>
		}
		
<span class="fc" id="L401">		helpMessage += &quot;\nnamed arguments:&quot;;</span>
		
<span class="fc bfc" id="L403" title="All 2 branches covered.">		for(int i = 0; i &lt; namedArgumentList.size(); i++) {</span>
<span class="fc" id="L404">			NamedArgument currentArg = namedArgumentList.get(i);</span>
<span class="fc" id="L405">			helpMessage += &quot;\n[--&quot; + currentArg.getName() + &quot;] [-&quot; + currentArg.getShortFormName() + &quot;] (&quot; + currentArg.getType() + &quot;) &quot; + currentArg.getDescription() + &quot; (optional)&quot;;   </span>
		}

<span class="fc" id="L408">		return helpMessage;</span>
    }
    
   
    
    private ArrayList&lt;String&gt; getPositionalArgs(String[] args){
<span class="fc" id="L414">    	ArrayList&lt;String&gt; posArgList = new ArrayList&lt;String&gt;(); </span>
<span class="fc bfc" id="L415" title="All 2 branches covered.">    	for(int i = 0; i &lt; args.length; i++){ //going through args from CLI</span>
<span class="fc bfc" id="L416" title="All 4 branches covered.">    		if(!args[i].startsWith(&quot;-&quot;) &amp;&amp; i == 0){ //test if the first arg is a positional arg</span>
<span class="fc" id="L417">    			posArgList.add(args[i]);</span>
    		}
<span class="fc bfc" id="L419" title="All 2 branches covered.">    		else if(!args[i].startsWith(&quot;-&quot;)){ //arg from CLI doesn't have a dash</span>
<span class="fc bfc" id="L420" title="All 2 branches covered.">    			if(!args[i-1].startsWith(&quot;-&quot;)){ //if the one before it doesn't have a dash, then it's a pos arg</span>
<span class="fc" id="L421">    				posArgList.add(args[i]);</span>
    			}
    			else{ 
<span class="fc" id="L424">    				String[] tempNamedArg = new String[2];</span>
<span class="fc bfc" id="L425" title="All 2 branches covered.">    				if(args[i-1].startsWith(&quot;--&quot;)){ </span>
<span class="fc" id="L426">    					tempNamedArg = args[i-1].split(&quot;--&quot;);</span>
<span class="fc bfc" id="L427" title="All 2 branches covered.">    					for(int j = 0; j &lt; namedArgumentList.size(); j++){ //g</span>
<span class="fc" id="L428">    						NamedArgument currentNamedArg = namedArgumentList.get(j);</span>
<span class="fc bfc" id="L429" title="All 2 branches covered.">    						if(currentNamedArg.getName().equals(tempNamedArg[1])) {</span>
<span class="fc bfc" id="L430" title="All 2 branches covered.">								if(currentNamedArg.getType().equals(&quot;boolean&quot;)){  //to pos args</span>
<span class="fc" id="L431">									posArgList.add(args[i]);</span>
								}
							}
    					}
    				}
    				else{ 
<span class="fc" id="L437">    					tempNamedArg = args[i-1].split(&quot;-&quot;);</span>
<span class="fc bfc" id="L438" title="All 2 branches covered.">						if(tempNamedArg[1].length() == 1){ </span>
<span class="fc bfc" id="L439" title="All 2 branches covered.">							for(int j = 0; j &lt; namedArgumentList.size(); j++){ </span>
<span class="fc" id="L440">								NamedArgument currentNamedArg = namedArgumentList.get(j);</span>
<span class="fc bfc" id="L441" title="All 2 branches covered.">								if(Character.toString(currentNamedArg.getShortFormName()).equals(tempNamedArg[1])) {</span>
<span class="fc bfc" id="L442" title="All 2 branches covered.">									if(currentNamedArg.getType().equals(&quot;boolean&quot;)){ </span>
<span class="fc" id="L443">										posArgList.add(args[i]);</span>
									}
								}
							}
						}
						else{
<span class="fc" id="L449">							posArgList.add(args[i]);</span>
						}
    				}
    			}
    		}
    	}
<span class="fc" id="L455">    	return posArgList;</span>
    }
    
    //used in incorrectDataTypeMessage
    String incorrectArgValueForSpecifiedDataType;
    
    private void setLongFormNamedArgValues(String[] args) throws NumberFormatException{
<span class="fc bfc" id="L462" title="All 2 branches covered.">    	for(int i = 0; i &lt; args.length; i++){</span>
<span class="fc" id="L463">    		String[] tempNamedArg = new String[2];</span>
<span class="fc bfc" id="L464" title="All 2 branches covered.">    		if(args[i].startsWith(&quot;--&quot;)){</span>
<span class="fc" id="L465">    			tempNamedArg = args[i].split(&quot;--&quot;);</span>
<span class="fc bfc" id="L466" title="All 2 branches covered.">    			for(int j = 0; j &lt; namedArgumentList.size(); j++){</span>
<span class="fc" id="L467">    				incorrectDataTypeIndex = j;</span>
<span class="fc" id="L468">    				incorrectArgumentType = &quot;named&quot;;</span>
<span class="fc" id="L469">    				NamedArgument currentArg = namedArgumentList.get(j);</span>
<span class="fc bfc" id="L470" title="All 2 branches covered.">    				if(currentArg.getName().equals(tempNamedArg[1])){</span>
<span class="fc bfc" id="L471" title="All 2 branches covered.">    					if(!currentArg.getType().equals(&quot;boolean&quot;)){</span>
<span class="fc" id="L472">    						incorrectArgValueForSpecifiedDataType = args[i+1];</span>
<span class="fc bfc" id="L473" title="All 2 branches covered.">    						if (currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L474">								int argValue = Integer.parseInt(args[i+1]);</span>
<span class="fc" id="L475">								currentArg.setValue(args[i+1]);</span>
<span class="fc" id="L476">							}</span>
			
<span class="pc bpc" id="L478" title="1 of 2 branches missed.">							else if (currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="nc" id="L479">								float argValue = Float.parseFloat(args[i+1]);</span>
<span class="nc" id="L480">								currentArg.setValue(args[i+1]);</span>
<span class="nc" id="L481">							}</span>
			
<span class="pc bpc" id="L483" title="1 of 2 branches missed.">							else if (currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L484">								currentArg.setValue(args[i+1]);</span>
							}
    					}
    					else{
<span class="fc" id="L488">    						currentArg.setValue(&quot;true&quot;);</span>
    					}
    				}
    			}
    		}
    	}
<span class="fc" id="L494">    }</span>
    private void setShortFormNamedArgValues(String[] args) throws NumberFormatException{
<span class="fc bfc" id="L496" title="All 2 branches covered.">		for(int i = 0; i &lt; args.length; i++){</span>
<span class="fc" id="L497">			String[] tempNamedArg = new String[2];</span>
<span class="fc bfc" id="L498" title="All 2 branches covered.">			if(args[i].startsWith(&quot;-&quot;)){</span>
<span class="fc" id="L499">				tempNamedArg = args[i].split(&quot;-&quot;);</span>
<span class="fc bfc" id="L500" title="All 2 branches covered.">				for(int k = 0; k &lt; namedArgumentList.size(); k++){</span>
<span class="fc" id="L501">					incorrectDataTypeIndex = k;</span>
<span class="fc" id="L502">					incorrectArgumentType = &quot;named&quot;;</span>
<span class="fc" id="L503">					NamedArgument currentNamedArg = namedArgumentList.get(k);</span>
<span class="fc bfc" id="L504" title="All 2 branches covered.">					if(tempNamedArg[1].length() == 1){ //single char</span>
<span class="fc bfc" id="L505" title="All 2 branches covered.">						if(Character.toString(currentNamedArg.getShortFormName()).equals(tempNamedArg[1])){</span>
<span class="fc bfc" id="L506" title="All 2 branches covered.">							if(!currentNamedArg.getType().equals(&quot;boolean&quot;)){</span>
<span class="fc" id="L507">								incorrectArgValueForSpecifiedDataType = args[i+1];	</span>
<span class="fc bfc" id="L508" title="All 2 branches covered.">								if (currentNamedArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L509">									int argValue = Integer.parseInt(args[i+1]);</span>
<span class="fc" id="L510">									currentNamedArg.setValue(args[i+1]);</span>
<span class="fc" id="L511">								}</span>
			
<span class="pc bpc" id="L513" title="1 of 2 branches missed.">								else if (currentNamedArg.getType().equals(&quot;float&quot;)){</span>
<span class="nc" id="L514">									float argValue = Float.parseFloat(args[i+1]);</span>
<span class="nc" id="L515">									currentNamedArg.setValue(args[i+1]);</span>
<span class="nc" id="L516">								}</span>
			
<span class="pc bpc" id="L518" title="1 of 2 branches missed.">								else if (currentNamedArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L519">									currentNamedArg.setValue(args[i+1]);</span>
								}
    					
							}
							else{
<span class="fc" id="L524">								currentNamedArg.setValue(&quot;true&quot;);</span>
							}
						}
					}
					else{ //multiple flags in one specification
<span class="fc bfc" id="L529" title="All 2 branches covered.">						for(int j = 0; j &lt; tempNamedArg[1].length(); j++){</span>
<span class="fc bfc" id="L530" title="All 2 branches covered.">							if(currentNamedArg.getShortFormName() == tempNamedArg[1].charAt(j)){</span>
<span class="fc" id="L531">								currentNamedArg.setValue(&quot;true&quot;);</span>
							}
						}
					}
				}
			}
		}
<span class="fc" id="L538">	}</span>
<span class="fc" id="L539">	String invalidNamedArgument = &quot;&quot;;</span>
	
	private void invalidNamedArgument(String[] args) throws ArgumentDoesNotExistException{
<span class="fc bfc" id="L542" title="All 2 branches covered.">		for(int i = 0; i &lt; args.length; i++){</span>
<span class="fc bfc" id="L543" title="All 2 branches covered.">			if(args[i].startsWith(&quot;--&quot;)){</span>
<span class="fc" id="L544">				String[] splitLongNamedArg = new String[2];</span>
<span class="fc" id="L545">				splitLongNamedArg = args[i].split(&quot;--&quot;);</span>
<span class="fc" id="L546">				NamedArgument tempArg = getNamedArgument(splitLongNamedArg[1]);</span>
<span class="fc bfc" id="L547" title="All 2 branches covered.">				if(tempArg == null){</span>
<span class="fc" id="L548">					invalidNamedArgument = splitLongNamedArg[1];</span>
<span class="fc" id="L549">					throw new ArgumentDoesNotExistException(argumentDoesNotExistMessage(invalidNamedArgument));</span>
				}
<span class="fc" id="L551">			}</span>
<span class="fc bfc" id="L552" title="All 2 branches covered.">			else if(args[i].startsWith(&quot;-&quot;)){</span>
<span class="fc" id="L553">				String[] splitShortNamedArg = new String[2];</span>
<span class="fc" id="L554">				splitShortNamedArg = args[i].split(&quot;-&quot;);</span>
<span class="fc bfc" id="L555" title="All 2 branches covered.">				if(splitShortNamedArg[1].length() == 1){ //single char</span>
<span class="fc" id="L556">					NamedArgument tempArg = getNamedArgument(splitShortNamedArg[1].charAt(0));</span>
<span class="pc bpc" id="L557" title="1 of 2 branches missed.">					if(tempArg == null){</span>
<span class="nc" id="L558">						invalidNamedArgument = splitShortNamedArg[1];</span>
<span class="nc" id="L559">						throw new ArgumentDoesNotExistException(argumentDoesNotExistMessage(invalidNamedArgument));</span>
					}
<span class="fc" id="L561">				}</span>
				else{
<span class="fc bfc" id="L563" title="All 2 branches covered.">					for(int k = 0; k &lt; splitShortNamedArg[1].length(); k++){</span>
<span class="fc" id="L564">						NamedArgument tempArg = getNamedArgument(splitShortNamedArg[1].charAt(k));</span>
<span class="pc bpc" id="L565" title="1 of 2 branches missed.">						if(tempArg == null){</span>
<span class="nc" id="L566">							invalidNamedArgument = Character.toString(splitShortNamedArg[1].charAt(k));</span>
<span class="nc" id="L567">							throw new ArgumentDoesNotExistException(argumentDoesNotExistMessage(invalidNamedArgument));</span>
						}
					}
				}
			}
		}
<span class="fc" id="L573">	}</span>
	
	
	private void parseNamedArgumentValues(List&lt;NamedArgument&gt; namedArgList) throws IncorrectArgumentValueException{
<span class="fc bfc" id="L577" title="All 2 branches covered.">		for(int i = 0; i &lt; namedArgList.size(); i++){</span>
<span class="fc" id="L578">			NamedArgument currentArg = namedArgList.get(i);</span>
<span class="fc" id="L579">			String errorArg = currentArg.getName();</span>
<span class="fc" id="L580">			String[] valueSet = currentArg.getValueSet();</span>
<span class="fc bfc" id="L581" title="All 2 branches covered.">			if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L582">				Boolean valueSetContainsArgValue = false;</span>
<span class="fc" id="L583">				String errorValue = &quot;&quot;;</span>
<span class="fc bfc" id="L584" title="All 2 branches covered.">				for(int j = 0; j &lt; valueSet.length; j++){</span>
<span class="pc bpc" id="L585" title="1 of 2 branches missed.">					if(currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="nc" id="L586">						int intValue = (Integer)currentArg.getValue();</span>
<span class="nc bnc" id="L587" title="All 2 branches missed.">						if(valueSet[j].equals(Integer.toString(intValue))){</span>
<span class="nc" id="L588">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L590">						errorValue = Integer.toString(intValue);</span>
<span class="nc" id="L591">					}</span>
<span class="pc bpc" id="L592" title="1 of 2 branches missed.">					else if(currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="nc" id="L593">						float floatValue = (Float)currentArg.getValue();</span>
<span class="nc bnc" id="L594" title="All 2 branches missed.">						if(valueSet[j].equals(Float.toString(floatValue))){</span>
<span class="nc" id="L595">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L597">						errorValue = Float.toString(floatValue);</span>
<span class="nc" id="L598">					}</span>
<span class="pc bpc" id="L599" title="1 of 2 branches missed.">					else if(currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="fc" id="L600">						String stringValue = (String)currentArg.getValue();</span>
<span class="fc bfc" id="L601" title="All 2 branches covered.">						if(valueSet[j].equals(stringValue)){</span>
<span class="fc" id="L602">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L604">						errorValue = stringValue;</span>
<span class="fc" id="L605">					}</span>
					else{
<span class="nc" id="L607">						Boolean boolValue = (Boolean)currentArg.getValue();</span>
<span class="nc bnc" id="L608" title="All 2 branches missed.">						if(valueSet[j].equals(boolValue)){</span>
<span class="nc" id="L609">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L611">						errorValue = Boolean.toString(boolValue);</span>
					}
				}
<span class="fc bfc" id="L614" title="All 2 branches covered.">				if(!valueSetContainsArgValue){</span>
<span class="fc" id="L615">					throw new IncorrectArgumentValueException(incorrectArgumentValueMessage(errorArg, errorValue));</span>
				}
			}
		}
<span class="fc" id="L619">	}</span>
	
	private void parsePositionalArgumentValues(List&lt;PositionalArgument&gt; posArgList) throws IncorrectArgumentValueException{
<span class="fc bfc" id="L622" title="All 2 branches covered.">		for(int i = 0; i &lt; posArgList.size(); i++){</span>
<span class="fc" id="L623">			PositionalArgument currentArg = posArgList.get(i);</span>
<span class="fc" id="L624">			String errorArg = currentArg.getName();</span>
<span class="fc" id="L625">			String[] valueSet = currentArg.getValueSet();</span>
<span class="fc bfc" id="L626" title="All 2 branches covered.">			if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L627">				Boolean valueSetContainsArgValue = false;</span>
<span class="fc" id="L628">				String errorValue = &quot;&quot;;</span>
<span class="fc bfc" id="L629" title="All 2 branches covered.">				for(int j = 0; j &lt; valueSet.length; j++){</span>
<span class="fc bfc" id="L630" title="All 2 branches covered.">					if(currentArg.getType().equals(&quot;integer&quot;)){</span>
<span class="fc" id="L631">						int intValue = (Integer)currentArg.getValue();</span>
<span class="fc bfc" id="L632" title="All 2 branches covered.">						if(valueSet[j].equals(Integer.toString(intValue))){</span>
<span class="fc" id="L633">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L635">						errorValue = Integer.toString(intValue);</span>
<span class="fc" id="L636">					}</span>
<span class="pc bpc" id="L637" title="1 of 2 branches missed.">					else if(currentArg.getType().equals(&quot;float&quot;)){</span>
<span class="fc" id="L638">						float floatValue = (Float)currentArg.getValue();</span>
<span class="fc bfc" id="L639" title="All 2 branches covered.">						if(valueSet[j].equals(Float.toString(floatValue))){</span>
<span class="fc" id="L640">							valueSetContainsArgValue = true;</span>
						}
<span class="fc" id="L642">						errorValue = Float.toString(floatValue);</span>
<span class="fc" id="L643">					}</span>
<span class="nc bnc" id="L644" title="All 2 branches missed.">					else if(currentArg.getType().equals(&quot;string&quot;)){</span>
<span class="nc" id="L645">						String stringValue = (String)currentArg.getValue();</span>
<span class="nc bnc" id="L646" title="All 2 branches missed.">						if(valueSet[j].equals(stringValue)){</span>
<span class="nc" id="L647">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L649">						errorValue = stringValue;</span>
<span class="nc" id="L650">					}</span>
					else{
<span class="nc" id="L652">						Boolean boolValue = (Boolean)currentArg.getValue();</span>
<span class="nc bnc" id="L653" title="All 2 branches missed.">						if(valueSet[j].equals(Boolean.toString(boolValue))){</span>
<span class="nc" id="L654">							valueSetContainsArgValue = true;</span>
						}
<span class="nc" id="L656">						errorValue = Boolean.toString(boolValue);</span>
					}
					
				}
<span class="fc bfc" id="L660" title="All 2 branches covered.">				if(!valueSetContainsArgValue){</span>
<span class="fc" id="L661">					throw new IncorrectArgumentValueException(incorrectArgumentValueMessage(errorArg, errorValue));</span>
				}
			}
		}
<span class="fc" id="L665">	}</span>
	
	private String incorrectArgumentValueMessage(String argName, String argValue){
<span class="fc" id="L668">		String message = this.usageMessage();</span>
		
<span class="fc" id="L670">		message += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + argName + &quot;: invalid value: &quot; + argValue;</span>
<span class="fc" id="L671">		return message;</span>
	}
	
	private String argumentDoesNotExistMessage(String invalidNamedArgument){
<span class="fc" id="L675">        String message = this.usageMessage();</span>
        
<span class="fc" id="L677">        message += &quot;\n&quot; + programName + &quot;.java: error: argument &quot; + invalidNamedArgument + &quot; does not exist&quot;;</span>
        
<span class="fc" id="L679">    	return message;</span>
	}
    
	/**
     *
     *&lt;span style=&quot;color:#4c6b87&quot;&gt;
     *{@code
     *if (helpArgValue.equals(&quot;true&quot;)){
				throw new HelpException(helpMessage());
			}
     *
     *}
     
     *&lt;/pre&gt;
     **@param parse Collects input data from CLI and parses each argument to the Library.
     @thorows helpexception displays a help message to the user 
     *@thorows IncorrectNumberOfArgsException Displays a help message which states the incorrect number of arguments message.
     *@thorows IncorrectArgTypeException Displays a help message which states that incorrect argument types have been used.
     *@thorows ArgumentDoesNotExistException Displays a help message which states that a specified argument does not exist or does not have a valid usage.
     *@thorows IncorrectArgumentValueException Displays a help message which states the incorrect
     */
    
	public void parse(String[] args) throws HelpException, IncorrectNumberOfArgsException, IncorrectArgTypeException, ArgumentDoesNotExistException, IncorrectArgumentValueException{
<span class="fc" id="L702">		ArrayList&lt;String&gt; tempPositionalArgList = getPositionalArgs(args);</span>
		
		try{
<span class="fc" id="L705">			setLongFormNamedArgValues(args);</span>
<span class="fc" id="L706">			setShortFormNamedArgValues(args);</span>
		}
<span class="fc" id="L708">		catch(Exception e){</span>
<span class="fc" id="L709">			throw new IncorrectArgTypeException(incorrectDataTypeMessage(tempPositionalArgList));</span>
<span class="fc" id="L710">		}</span>
		
<span class="fc" id="L712">		invalidNamedArgument(args); //throws ArgumentDoesNotExistException</span>
		
<span class="fc" id="L714">        NamedArgument helpArgument = getNamedArgument(&quot;help&quot;);</span>
<span class="fc bfc" id="L715" title="All 2 branches covered.">        if (helpArgument != null){</span>
<span class="fc" id="L716">			Boolean helpArgValue = (Boolean)helpArgument.getValue();</span>
<span class="fc bfc" id="L717" title="All 2 branches covered.">			if (helpArgValue){</span>
<span class="fc" id="L718">				throw new HelpException(helpMessage());</span>
			}
        }
        
<span class="fc bfc" id="L722" title="All 2 branches covered.">		if (positionalArgumentList.size() != tempPositionalArgList.size()){</span>
<span class="fc" id="L723">				throw new IncorrectNumberOfArgsException(incorrectNumberOfArgsMessage(tempPositionalArgList));</span>
		}
<span class="pc bpc" id="L725" title="1 of 2 branches missed.">		else if (positionalArgumentList.size() == tempPositionalArgList.size()){</span>
<span class="fc bfc" id="L726" title="All 2 branches covered.">			for(int i = 0; i &lt; tempPositionalArgList.size(); i++){</span>
<span class="fc" id="L727">   				PositionalArgument currentArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L728">   				currentArg.setValue(tempPositionalArgList.get(i));</span>
   			}
			try{
<span class="fc" id="L731">				parseDataType(tempPositionalArgList);</span>
			}
<span class="fc" id="L733">			catch (Exception e){</span>
<span class="fc" id="L734">				throw new IncorrectArgTypeException(incorrectDataTypeMessage(tempPositionalArgList));</span>
<span class="fc" id="L735">			}</span>
<span class="fc" id="L736">			parseNamedArgumentValues(namedArgumentList); //throws IncorrectArgumentValueException</span>
<span class="fc" id="L737">			parsePositionalArgumentValues(positionalArgumentList); //throws IncorrectArgumentValueException</span>
		}	
<span class="fc" id="L739">	}</span>
    
    /**
     *@param writeToXMLFile Allow argument information to be saved to an XML file. 
     *&lt;pre&gt;
     *&lt;h2&gt;
     * Use Cases:
     *&lt;/h2&gt;
     *Assume VolumeCalculator.java allows for three positional arguments, named &lt;b&gt;&lt;font color = &quot;#4c6b87&quot;&gt;length&lt;/font&gt;&lt;/b&gt;, &lt;b&gt;&lt;font color= 
     *&quot;#4c6b87&quot;&gt;width&lt;/font&gt;&lt;/b&gt;, and &lt;b&gt;&lt;font color = &quot;#4c6b87&quot;&gt;height&lt;/font&gt;&lt;/b&gt;, respectively, 
     *each representing float values. Assume that it also allows two optional named arguments: type, 
     *a string that defaults to &quot;box&quot; with short-form t, and digits, an integer that defaults to 4 
     *with short-form d.
     *
     *
     &lt;/pre&gt;
     *
     */
	
	public void writeToXMLFile(String fileName){
<span class="fc" id="L759">		File outputFile = new File(fileName);</span>
		try{
<span class="fc" id="L761">			PrintWriter outputFileWriter = new PrintWriter(outputFile);</span>
<span class="fc" id="L762">			outputFileWriter.println(&quot;&lt;?xml version=&quot; + &quot;\&quot;1.0\&quot;?&gt;&quot;);</span>
<span class="fc" id="L763">			outputFileWriter.println(&quot;&lt;program&gt;&quot;);</span>
<span class="fc" id="L764">				outputFileWriter.println(&quot;&lt;name&gt;&quot; + getProgramName() + &quot;&lt;/name&gt;&quot;);</span>
<span class="fc" id="L765">				outputFileWriter.println(&quot;&lt;description&gt;&quot; + getProgramDescription() + &quot;&lt;/description&gt;&quot;);</span>
<span class="fc" id="L766">				outputFileWriter.println(&quot;&lt;arguments&gt;&quot;);</span>
			
<span class="fc bfc" id="L768" title="All 2 branches covered.">				for(int i = 0; i &lt; positionalArgumentList.size(); i++){</span>
<span class="fc" id="L769">					PositionalArgument posArg = positionalArgumentList.get(i);</span>
<span class="fc" id="L770">					outputFileWriter.println(&quot;&lt;positional&gt;&quot;);</span>
<span class="fc" id="L771">						outputFileWriter.println(&quot;&lt;name&gt;&quot; + posArg.getName() + &quot;&lt;/name&gt;&quot;);</span>
<span class="fc" id="L772">						outputFileWriter.println(&quot;&lt;type&gt;&quot; + posArg.getType() + &quot;&lt;/type&gt;&quot;);</span>
<span class="fc" id="L773">						outputFileWriter.println(&quot;&lt;description&gt;&quot; + posArg.getDescription() + &quot;&lt;/description&gt;&quot;);</span>
<span class="fc" id="L774">						outputFileWriter.println(&quot;&lt;position&gt;&quot; + (posArg.getPosition() + 1) + &quot;&lt;/position&gt;&quot;); //prints position starting at 1</span>
<span class="fc" id="L775">						String[] valueSet = posArg.getValueSet();</span>
<span class="fc bfc" id="L776" title="All 2 branches covered.">						if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L777">							String line = &quot;&lt;valueset&gt;&quot;;</span>
							
<span class="fc" id="L779">							line += valueSet[0];</span>
<span class="fc bfc" id="L780" title="All 2 branches covered.">							for(int j = 1; j &lt; valueSet.length; j++){</span>
<span class="fc" id="L781">								line += &quot;,&quot; + valueSet[j];</span>
							}
<span class="fc" id="L783">							line += &quot;&lt;/valueset&gt;&quot;;	</span>
<span class="fc" id="L784">							outputFileWriter.println(line);</span>
						}
						//outputFileWriter.println(line);
<span class="fc" id="L787">					outputFileWriter.println(&quot;&lt;/positional&gt;&quot;);</span>
				}
				
<span class="fc bfc" id="L790" title="All 2 branches covered.">				for (int j = 0; j &lt; namedArgumentList.size(); j++){</span>
<span class="fc" id="L791">					NamedArgument namedArg = namedArgumentList.get(j);</span>
<span class="fc" id="L792">					outputFileWriter.println(&quot;&lt;named&gt;&quot;);</span>
<span class="fc" id="L793">						outputFileWriter.println(&quot;&lt;name&gt;&quot; + namedArg.getName() + &quot;&lt;/name&gt;&quot;);</span>
<span class="fc" id="L794">						outputFileWriter.println(&quot;&lt;shortname&gt;&quot; + namedArg.getShortFormName() + &quot;&lt;/shortname&gt;&quot;);</span>
<span class="fc" id="L795">						outputFileWriter.println(&quot;&lt;type&gt;&quot; + namedArg.getType() + &quot;&lt;/type&gt;&quot;);</span>
<span class="fc" id="L796">						outputFileWriter.println(&quot;&lt;description&gt;&quot; + namedArg.getDescription() + &quot;&lt;/description&gt;&quot;);</span>
<span class="fc" id="L797">						outputFileWriter.println(&quot;&lt;default&gt;&quot; + namedArg.getDefaultValue() + &quot;&lt;/default&gt;&quot;);</span>
<span class="fc" id="L798">						String[] valueSet = namedArg.getValueSet();</span>
<span class="fc bfc" id="L799" title="All 2 branches covered.">						if(!valueSet[0].equals(&quot;&quot;)){</span>
<span class="fc" id="L800">							String line = &quot;&lt;valueset&gt;&quot;;</span>
<span class="fc" id="L801">							line += valueSet[0];</span>
<span class="fc bfc" id="L802" title="All 2 branches covered.">							for(int k = 1; k &lt; valueSet.length; k++){</span>
<span class="fc" id="L803">								line += &quot;,&quot; + valueSet[k];</span>
							}
<span class="fc" id="L805">							line += &quot;&lt;/valueset&gt;&quot;;	</span>
<span class="fc" id="L806">							outputFileWriter.println(line);</span>
						}
<span class="fc" id="L808">					outputFileWriter.println(&quot;&lt;/named&gt;&quot;);</span>
				}
				
<span class="fc" id="L811">				outputFileWriter.println(&quot;&lt;/arguments&gt;&quot;);</span>
<span class="fc" id="L812">			outputFileWriter.println(&quot;&lt;/program&gt;&quot;);</span>
			
<span class="fc" id="L814">			outputFileWriter.close();</span>
		}
<span class="nc" id="L816">		catch(Exception e){</span>
<span class="nc" id="L817">		System.out.println(e.getMessage());</span>
<span class="fc" id="L818">		}</span>
<span class="fc" id="L819">	}</span>
}










</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>